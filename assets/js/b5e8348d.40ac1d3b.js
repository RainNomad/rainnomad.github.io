"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5997],{1737:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>s});const t=JSON.parse('{"id":"JavaScript-\u7b14\u8bb0/\u6a21\u677f\u8bed\u6cd5\u7684\u7b80\u5355\u5b9e\u73b0","title":"\u6a21\u677f\u8bed\u6cd5\u7684\u7b80\u5355\u5b9e\u73b0","description":"\u6a21\u677f\u8bed\u6cd5\u5141\u8bb8\u5728HTML\u4e2d\u4e4b\u63d2\u5165Js\u53d8\u91cf\u4ee5\u53ca\u8868\u8fbe\u5f0f\uff0c\u5f53\u5728Js\u4e2d\u63a7\u5236render\u7684\u65f6\u5019\u80fd\u591f\u81ea\u52a8\u5728\u9875\u9762\u4e0a\u5c06\u53d8\u91cf\u6216\u8005\u662f\u8868\u8fbe\u5f0f\u8fdb\u884c\u8ba1\u7b97\u5e76\u663e\u793a\uff0c\u6bd4\u8f83\u5e38\u89c1\u7684\u6a21\u677f\u8bed\u6cd5\u6709mustcache\u98ce\u683c\u7684{{}}\u4ee5\u53caDSL\u98ce\u683c\u7684dsl-html\u7b49\u3002","source":"@site/docs/JavaScript-\u7b14\u8bb0/\u6a21\u677f\u8bed\u6cd5\u7684\u7b80\u5355\u5b9e\u73b0.md","sourceDirName":"JavaScript-\u7b14\u8bb0","slug":"/JavaScript-\u7b14\u8bb0/\u6a21\u677f\u8bed\u6cd5\u7684\u7b80\u5355\u5b9e\u73b0","permalink":"/docs/JavaScript-\u7b14\u8bb0/\u6a21\u677f\u8bed\u6cd5\u7684\u7b80\u5355\u5b9e\u73b0","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/JavaScript-\u7b14\u8bb0/\u6a21\u677f\u8bed\u6cd5\u7684\u7b80\u5355\u5b9e\u73b0.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u624b\u52a8\u5b9e\u73b0apply\u3001call\u3001bind","permalink":"/docs/JavaScript-\u7b14\u8bb0/\u624b\u52a8\u5b9e\u73b0apply call bind"},"next":{"title":"\u6df1\u5165\u7406\u89e3Js\u4e2d\u7684this","permalink":"/docs/JavaScript-\u7b14\u8bb0/\u6df1\u5165\u7406\u89e3Js\u4e2d\u7684this"}}');var d=r(4848),c=r(8453);const a={},o="\u6a21\u677f\u8bed\u6cd5\u7684\u7b80\u5355\u5b9e\u73b0",l={},s=[{value:"AST",id:"ast",level:2},{value:"\u7b80\u5355\u5b9e\u73b0",id:"\u7b80\u5355\u5b9e\u73b0",level:2},{value:"\u6bcf\u65e5\u4e00\u9898",id:"\u6bcf\u65e5\u4e00\u9898",level:2},{value:"\u53c2\u8003",id:"\u53c2\u8003",level:2}];function i(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"\u6a21\u677f\u8bed\u6cd5\u7684\u7b80\u5355\u5b9e\u73b0",children:"\u6a21\u677f\u8bed\u6cd5\u7684\u7b80\u5355\u5b9e\u73b0"})}),"\n",(0,d.jsxs)(n.p,{children:["\u6a21\u677f\u8bed\u6cd5\u5141\u8bb8\u5728",(0,d.jsx)(n.code,{children:"HTML"}),"\u4e2d\u4e4b\u63d2\u5165",(0,d.jsx)(n.code,{children:"Js"}),"\u53d8\u91cf\u4ee5\u53ca\u8868\u8fbe\u5f0f\uff0c\u5f53\u5728",(0,d.jsx)(n.code,{children:"Js"}),"\u4e2d\u63a7\u5236",(0,d.jsx)(n.code,{children:"render"}),"\u7684\u65f6\u5019\u80fd\u591f\u81ea\u52a8\u5728\u9875\u9762\u4e0a\u5c06\u53d8\u91cf\u6216\u8005\u662f\u8868\u8fbe\u5f0f\u8fdb\u884c\u8ba1\u7b97\u5e76\u663e\u793a\uff0c\u6bd4\u8f83\u5e38\u89c1\u7684\u6a21\u677f\u8bed\u6cd5\u6709",(0,d.jsx)(n.code,{children:"mustcache"}),"\u98ce\u683c\u7684",(0,d.jsx)(n.code,{children:"{{}}"}),"\u4ee5\u53ca",(0,d.jsx)(n.code,{children:"DSL"}),"\u98ce\u683c\u7684",(0,d.jsx)(n.code,{children:"dsl-html"}),"\u7b49\u3002"]}),"\n",(0,d.jsx)(n.h2,{id:"ast",children:"AST"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"AST"}),"\u62bd\u8c61\u8bed\u6cd5\u6811\uff0c\u5168\u79f0\u4e3a",(0,d.jsx)(n.code,{children:"Abstract Syntax Tree"}),"\u662f\u6e90\u4ee3\u7801\u7684\u62bd\u8c61\u8bed\u6cd5\u7ed3\u6784\u7684\u6811\u72b6\u8868\u73b0\u5f62\u5f0f\uff0c\u6bcf\u79cd\u6e90\u7801\u90fd\u53ef\u4ee5\u88ab\u62bd\u8c61\u6210\u4e3a",(0,d.jsx)(n.code,{children:"AST"}),"\uff0c\u5728\u8fd9\u91cc\u628a\u6a21\u677f\u89e3\u6790\u6210\u4e3a",(0,d.jsx)(n.code,{children:"AST"}),",\u5c31\u662f\u5c06\u6a21\u677f\u7684",(0,d.jsx)(n.code,{children:"HTML"}),"\u7ed3\u6784\u8fdb\u884c\u89e3\u6790\uff0c\u53d8\u6210\u4e00\u68f5\u9644\u5e26\u7ed3\u6784\u3001\u5173\u7cfb\u3001\u5c5e\u6027\u7684\u62bd\u8c61\u6811\uff0c\u8fd9\u6837\u505a\u65b9\u4fbf\u540e\u7eed\u5bf9\u6a21\u677f\u8fdb\u884c\u5904\u7406\uff0c\u51cf\u5c11\u4e86\u591a\u6b21\u89e3\u6790\u5b57\u7b26\u4e32\u5e26\u6765\u7684\u6027\u80fd\u6d88\u8017\uff0c\u540c\u65f6\u5c06",(0,d.jsx)(n.code,{children:"HTML"}),"\u53d8\u6210\u4e00\u68f5\u6811\u7684\u6570\u636e\u7ed3\u6784\u4e4b\u540e\u66f4\u52a0\u65b9\u4fbf\u4e8e\u904d\u5386\uff0c\u4e0b\u9762\u662f\u5bf9\u4e8e\u4f8b\u5b50\u4e2d\u7684",(0,d.jsx)(n.code,{children:"HTML"}),"\u7684\u7b80\u5355\u7684",(0,d.jsx)(n.code,{children:"AST"}),"\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-html",children:'<div class="root" name="root">\r\n    <p>1</p>\r\n    <div>11</div>\r\n</div>\n'})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:'{\r\n    type: "tag",\r\n    tagName: "div",\r\n    attr: {\r\n        className: "root"\r\n        name: "root"\r\n    },\r\n    parent: null,\r\n    children: [{\r\n        type: "tag",\r\n        tagName: "p",\r\n        attr: {},\r\n        parent: {} /* \u7236\u8282\u70b9\u7684\u5f15\u7528 */, \r\n        children: [{\r\n            type: "text",\r\n            tagName: "text",\r\n            parent: {} /* \u7236\u8282\u70b9\u7684\u5f15\u7528 */, \r\n            content: "1"\r\n        }]\r\n    },{\r\n        type: "tag",\r\n        tagName: "div",\r\n        attr: {},\r\n        parent: {} /* \u7236\u8282\u70b9\u7684\u5f15\u7528 */, \r\n        children: [{\r\n            type: "text",\r\n            tagName: "text",\r\n            parent: {} /* \u7236\u8282\u70b9\u7684\u5f15\u7528 */, \r\n            content: "11"\r\n        }]\r\n    }]\r\n}\n'})}),"\n",(0,d.jsx)(n.h2,{id:"\u7b80\u5355\u5b9e\u73b0",children:"\u7b80\u5355\u5b9e\u73b0"}),"\n",(0,d.jsxs)(n.p,{children:["\u5bf9",(0,d.jsx)(n.code,{children:"mustcache"}),"\u98ce\u683c\u7684",(0,d.jsx)(n.code,{children:"{{}}"}),"\u8fdb\u884c\u7b80\u5355\u7684\u5b9e\u73b0\uff0c\u4ec5\u5bf9\u4e8e\u5176\u6570\u636e\u7684\u5c55\u793a\u65b9\u9762\u6709\u5b9e\u73b0\uff0c\u5bf9\u4e8e\u5176\u6307\u4ee4\u4f8b\u5982\u5faa\u73af\u7b49\u5e76\u672a\u5b9e\u73b0\uff0c\u901a\u8fc7\u5904\u7406\u5b57\u7b26\u4e32\uff0c\u5c06\u5176\u8f6c\u6362\u4e3a\u4e00\u4e2a\u51fd\u6570\u5e76\u4f20\u53c2\u6267\u884c\uff0c\u5373\u53ef\u5b9e\u73b0\u6570\u636e\u7684\u5c55\u793a\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>\u6a21\u677f\u8bed\u6cd5</title>\r\n</head>\r\n<body>\r\n    <div id="root">\r\n        <div>{{show}}</div>\r\n        <div>{{description}}</div>\r\n    </div>\r\n</body>\r\n    <script type="text/javascript">\r\n        var data = { \r\n            show: 1,\r\n            description: "\u4e00\u4e2a\u7b80\u5355\u7684\u6a21\u677f\u8bed\u6cd5"\r\n        };\r\n\r\n        function render(element, data) {\r\n            var originString = element.innerHTML;\r\n            var html = String(originString||\'\').replace(/"/g,\'\\\\"\').replace(/\\s+|\\r|\\t|\\n/g, \' \')\r\n            .replace(/\\{\\{(.)*?\\}\\}/g, function(value){ \r\n                return  value.replace("{{",\'"+(\').replace("}}",\')+"\');\r\n            })\r\n            html = `var targetHTML = "${html}";return targetHTML;`;\r\n            var parsedHTML = new Function(...Object.keys(data), html)(...Object.values(data));\r\n            element.innerHTML = parsedHTML;\r\n        }\r\n\r\n        render(document.getElementById("root"), data);\r\n    <\/script>\r\n</html> \n'})}),"\n",(0,d.jsxs)(n.p,{children:["\u901a\u8fc7\u5bf9\u4e8e\u5b57\u7b26\u4e32\u7684\u5904\u7406\u5e76\u4f7f\u7528",(0,d.jsx)(n.code,{children:"Function"}),"\u5b9e\u73b0\u6a21\u677f\u8bed\u6cd5\uff0c\u5982\u679c\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u8f83\u4e3a\u5b8c\u6574\u7684\u8fc7\u6ee4\uff0c\u662f\u5b8c\u5168\u53ef\u4ee5\u751f\u6210\u8f83\u4e3a\u5b8c\u5584\u7684\u6a21\u677f\u8bed\u6cd5\u7684\u5904\u7406\u7684\uff0c\u5305\u62ec",(0,d.jsx)(n.code,{children:"Js"}),"\u7684\u8868\u8fbe\u5f0f\u4ee5\u53ca\u81ea\u5e26\u6307\u4ee4\u7b49\uff0c\u5982",(0,d.jsx)(n.code,{children:"mustcache.js"}),"\u3001",(0,d.jsx)(n.code,{children:"layui.js"}),"\u7684",(0,d.jsx)(n.code,{children:"laytpl"}),"\u6a21\u5757\u3002\u57fa\u4e8e",(0,d.jsx)(n.code,{children:"AST"}),"\u7684\u6a21\u677f\u8bed\u6cd5\u9700\u8981\u89e3\u6790",(0,d.jsx)(n.code,{children:"HTML"}),"\u6210\u4e3a",(0,d.jsx)(n.code,{children:"AST"}),"\uff0c\u7136\u540e\u5c06",(0,d.jsx)(n.code,{children:"AST"}),"\u8f6c\u5316\u4e3a\u5b57\u7b26\u4e32\uff0c\u5c06\u5b57\u7b26\u4e32\u4f5c\u4e3a\u51fd\u6570\u6267\u884c\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u4f9d\u65e7\u9700\u8981\u7528\u5230",(0,d.jsx)(n.code,{children:"Function"}),"\uff0c\u4e0b\u8fb9\u7684\u4f8b\u5b50\u53ea\u662f\u501f\u52a9\u4e86",(0,d.jsx)(n.code,{children:"Js"}),"\u53d6\u5f97",(0,d.jsx)(n.code,{children:"DOM"}),"\u7ed3\u6784\u751f\u6210\u7684",(0,d.jsx)(n.code,{children:"AST"}),"\uff0c\u6ca1\u6709\u81ea\u884c\u89e3\u6790",(0,d.jsx)(n.code,{children:"HTML"}),"\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>\u6a21\u677f\u8bed\u6cd5</title>\r\n</head>\r\n<body>\r\n    <div id="root" class="root-node">\r\n        <div>{{show}}</div>\r\n        <div>{{description}}</div>\r\n    </div>\r\n</body>\r\n    <script type="text/javascript">\r\n        var data = { \r\n            show: 1,\r\n            description: "\u4e00\u4e2a\u7b80\u5355\u7684\u6a21\u677f\u8bed\u6cd5"\r\n        };\r\n\r\n        function parseAST(root){\r\n            var node = {};\r\n            node.parent = null;\r\n            if(root.nodeName === "#text"){\r\n                node.type = "text";\r\n                node.tagName = "text";\r\n                node.content = root.textContent.replace(/\\s+|\\r|\\t|\\n/g, \' \').replace(/"/g,\'\\\\"\');\r\n            }else{\r\n                node.type = "tag";\r\n                node.tagName = root.localName;\r\n                node.children = [];\r\n                node.attr = {};\r\n                Array.prototype.forEach.call(root.attributes, item => node.attr[item.nodeName] = item.nodeValue );\r\n            }\r\n            Array.prototype.forEach.call(root.childNodes, element => {\r\n                var parsedNode = parseAST(element);\r\n                parsedNode.parent = root;\r\n                node.children.push(parsedNode);\r\n            });\r\n            return node;\r\n        }\r\n        \r\n        function render(element, template, data) {\r\n            html = `var targetHTML = "${template}";return targetHTML;`;\r\n            var parsedHTML = new Function(...Object.keys(data), html)(...Object.values(data));\r\n            element.innerHTML = parsedHTML;\r\n        }\r\n\r\n        function generateHTMLTemplate(AST){\r\n            var template = "";\r\n            AST.forEach( node => {\r\n                if(node.type === "tag"){\r\n                    template += `<${node.tagName}>`;\r\n                    template += generateHTMLTemplate(node.children);\r\n                    template += `</${node.tagName}>`;\r\n                }else{\r\n                    if(node.content.match(/\\{\\{(.)*?\\}\\}/)){\r\n                        var expression = node.content.replace(/\\{\\{(.)*?\\}\\}/g, function(value){ \r\n                            return  value.replace("{{",\'"+(\').replace("}}",\')+"\');\r\n                        })\r\n                        template += expression;\r\n                    }else{\r\n                        template += node.content;\r\n                    }\r\n                }\r\n            })\r\n            return template;\r\n        }\r\n\r\n        var root  = document.getElementById("root");\r\n        var AST = parseAST(root);\r\n        var template = generateHTMLTemplate([AST]);\r\n        render(root, template, data);\r\n    <\/script>\r\n</html> \n'})}),"\n",(0,d.jsxs)(n.p,{children:["\u867d\u7136\u770b\u8d77\u6765\u6700\u540e\u90fd\u9700\u8981\u4f7f\u7528",(0,d.jsx)(n.code,{children:"Function"}),"\u53bb\u5904\u7406\u5b57\u7b26\u4e32\uff0c\u800c",(0,d.jsx)(n.code,{children:"AST"}),"\u8fd8\u9700\u8981\u89e3\u6790",(0,d.jsx)(n.code,{children:"HTML"}),"\u7136\u540e\u518d\u62fc\u63a5\u5b57\u7b26\u4e32\uff0c\u589e\u52a0\u4e86\u8ba1\u7b97\u7684\u65f6\u95f4\uff0c\u4f46\u662f\u5982\u679c\u4ec5\u4ec5\u662f\u5b8c\u5168\u57fa\u4e8e\u5904\u7406\u5b57\u7b26\u4e32\u7684\u65b9\u5f0f\u5b9e\u73b0\u7684\u6a21\u677f\u8bed\u6cd5\uff0c\u5728\u6570\u636e\u8fdb\u884c\u53d8\u66f4\u65f6\u90fd\u9700\u8981\u8fdb\u884c",(0,d.jsx)(n.code,{children:"render"}),"\uff0c\u6bcf\u6b21",(0,d.jsx)(n.code,{children:"render"}),"\u7684\u65f6\u5019\u90fd\u9700\u8981\u91cd\u65b0\u6e32\u67d3\u6574\u4e2a",(0,d.jsx)(n.code,{children:"DOM"}),"\uff0c\u867d\u7136\u5728\u4e0a\u8fb9\u7684\u7b80\u5355\u5b9e\u73b0\u4e2d",(0,d.jsx)(n.code,{children:"AST"}),"\u4e5f\u662f\u91cd\u65b0\u6e32\u67d3\u4e86\u6574\u4e2a\u6a21\u7248\uff0c\u4f46\u662f\u73b0\u5728\u4e3b\u6d41\u7684",(0,d.jsx)(n.code,{children:"Js"}),"\u6846\u67b6\u4f8b\u5982",(0,d.jsx)(n.code,{children:"Vue"}),"\u5c31\u662f\u57fa\u4e8e",(0,d.jsx)(n.code,{children:"AST"}),"\u7684\u65b9\u5f0f\uff0c\u9996\u5148\u89e3\u6790",(0,d.jsx)(n.code,{children:"template"}),"\u4e3a",(0,d.jsx)(n.code,{children:"AST"}),"\uff0c\u7136\u540e\u5bf9\u4e8e",(0,d.jsx)(n.code,{children:"AST"}),"\u8fdb\u884c\u9759\u6001\u8282\u70b9\u6807\u8bb0\uff0c\u7528\u4ee5\u6807\u8bb0\u9759\u6001\u7684\u8282\u70b9\u8fdb\u884c\u91cd\u7528\u8df3\u8fc7\u6bd4\u5bf9\uff0c\u4ece\u800c\u8fdb\u884c\u6e32\u67d3\u4f18\u5316\uff0c\u7136\u540e\u751f\u6210\u865a\u62df",(0,d.jsx)(n.code,{children:"DOM"}),"\uff0c\u5f53\u6570\u636e\u8fdb\u884c\u53d8\u66f4\u65f6\u865a\u62df",(0,d.jsx)(n.code,{children:"DOM"}),"\u4f1a\u8fdb\u884c",(0,d.jsx)(n.code,{children:"diff"}),"\u7b97\u6cd5\u7684\u6bd4\u5bf9\uff0c\u627e\u5230\u6570\u636e\u6709\u53d8\u66f4\u7684\u8282\u70b9\uff0c\u7136\u540e\u8fdb\u884c\u6700\u5c0f\u5316\u6e32\u67d3\uff0c\u8fd9\u6837\u5c31\u4e0d\u9700\u8981\u5728\u6570\u636e\u53d8\u66f4\u65f6\u5c06\u6574\u4e2a\u6a21\u677f\u8fdb\u884c\u6e32\u67d3\uff0c\u4ece\u800c\u589e\u52a0\u4e86\u6e32\u67d3\u7684\u6548\u7387\u3002"]}),"\n",(0,d.jsx)(n.h2,{id:"\u6bcf\u65e5\u4e00\u9898",children:"\u6bcf\u65e5\u4e00\u9898"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"https://github.com/WindrunnerMax/EveryDay\n"})}),"\n",(0,d.jsx)(n.h2,{id:"\u53c2\u8003",children:"\u53c2\u8003"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"https://www.cnblogs.com/libin-1/p/6544519.html\r\nhttps://www.cnblogs.com/10manongit/p/12869775.html\r\nhttps://blog.csdn.net/weixin_34321977/article/details/91419022\n"})})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(i,{...e})}):i(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var t=r(6540);const d={},c=t.createContext(d);function a(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:a(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);