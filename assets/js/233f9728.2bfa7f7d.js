"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8151],{3175:(e,d,n)=>{n.r(d),n.d(d,{assets:()=>s,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"VUE-\u7b14\u8bb0/Vue\u4e2ddiff\u7b97\u6cd5\u7684\u7406\u89e3","title":"Vue\u4e2ddiff\u7b97\u6cd5\u7684\u7406\u89e3","description":"diff\u7b97\u6cd5\u7528\u6765\u8ba1\u7b97\u51faVirtual DOM\u4e2d\u6539\u53d8\u7684\u90e8\u5206\uff0c\u7136\u540e\u9488\u5bf9\u8be5\u90e8\u5206\u8fdb\u884cDOM\u64cd\u4f5c\uff0c\u800c\u4e0d\u7528\u91cd\u65b0\u6e32\u67d3\u6574\u4e2a\u9875\u9762\uff0c\u6e32\u67d3\u6574\u4e2aDOM\u7ed3\u6784\u7684\u8fc7\u7a0b\u4e2d\u5f00\u9500\u662f\u5f88\u5927\u7684\uff0c\u9700\u8981\u6d4f\u89c8\u5668\u5bf9DOM\u7ed3\u6784\u8fdb\u884c\u91cd\u7ed8\u4e0e\u56de\u6d41\uff0c\u800cdiff\u7b97\u6cd5\u80fd\u591f\u4f7f\u5f97\u64cd\u4f5c\u8fc7\u7a0b\u4e2d\u53ea\u66f4\u65b0\u4fee\u6539\u7684\u90a3\u90e8\u5206DOM\u7ed3\u6784\u800c\u4e0d\u66f4\u65b0\u6574\u4e2aDOM\uff0c\u8fd9\u6837\u80fd\u591f\u6700\u5c0f\u5316\u64cd\u4f5cDOM\u7ed3\u6784\uff0c\u80fd\u591f\u6700\u5927\u7a0b\u5ea6\u4e0a\u51cf\u5c11\u6d4f\u89c8\u5668\u91cd\u7ed8\u4e0e\u56de\u6d41\u7684\u89c4\u6a21\u3002","source":"@site/docs/VUE-\u7b14\u8bb0/Vue\u4e2ddiff\u7b97\u6cd5\u7684\u7406\u89e3.md","sourceDirName":"VUE-\u7b14\u8bb0","slug":"/VUE-\u7b14\u8bb0/Vue\u4e2ddiff\u7b97\u6cd5\u7684\u7406\u89e3","permalink":"/docs/VUE-\u7b14\u8bb0/Vue\u4e2ddiff\u7b97\u6cd5\u7684\u7406\u89e3","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/VUE-\u7b14\u8bb0/Vue\u4e2ddiff\u7b97\u6cd5\u7684\u7406\u89e3.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Vue\u4e2dcomputed\u5206\u6790","permalink":"/docs/VUE-\u7b14\u8bb0/Vue\u4e2dcomputed\u5206\u6790"},"next":{"title":"Vue\u4e2dkey\u7684\u4f5c\u7528","permalink":"/docs/VUE-\u7b14\u8bb0/Vue\u4e2dkey\u7684\u4f5c\u7528"}}');var c=n(4848),o=n(8453);const l={},i="Vue\u4e2ddiff\u7b97\u6cd5\u7684\u7406\u89e3",s={},t=[{value:"\u865a\u62dfDOM",id:"\u865a\u62dfdom",level:2},{value:"diff\u7b97\u6cd5",id:"diff\u7b97\u6cd5",level:2},{value:"\u65f6\u95f4\u590d\u6742\u5ea6",id:"\u65f6\u95f4\u590d\u6742\u5ea6",level:3},{value:"diff\u7b56\u7565",id:"diff\u7b56\u7565",level:3},{value:"\u5206\u6790",id:"\u5206\u6790",level:3},{value:"\u6bcf\u65e5\u4e00\u9898",id:"\u6bcf\u65e5\u4e00\u9898",level:2},{value:"\u53c2\u8003",id:"\u53c2\u8003",level:2}];function x(e){const d={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d.header,{children:(0,c.jsx)(d.h1,{id:"vue\u4e2ddiff\u7b97\u6cd5\u7684\u7406\u89e3",children:"Vue\u4e2ddiff\u7b97\u6cd5\u7684\u7406\u89e3"})}),"\n",(0,c.jsxs)(d.p,{children:[(0,c.jsx)(d.code,{children:"diff"}),"\u7b97\u6cd5\u7528\u6765\u8ba1\u7b97\u51fa",(0,c.jsx)(d.code,{children:"Virtual DOM"}),"\u4e2d\u6539\u53d8\u7684\u90e8\u5206\uff0c\u7136\u540e\u9488\u5bf9\u8be5\u90e8\u5206\u8fdb\u884c",(0,c.jsx)(d.code,{children:"DOM"}),"\u64cd\u4f5c\uff0c\u800c\u4e0d\u7528\u91cd\u65b0\u6e32\u67d3\u6574\u4e2a\u9875\u9762\uff0c\u6e32\u67d3\u6574\u4e2a",(0,c.jsx)(d.code,{children:"DOM"}),"\u7ed3\u6784\u7684\u8fc7\u7a0b\u4e2d\u5f00\u9500\u662f\u5f88\u5927\u7684\uff0c\u9700\u8981\u6d4f\u89c8\u5668\u5bf9",(0,c.jsx)(d.code,{children:"DOM"}),"\u7ed3\u6784\u8fdb\u884c\u91cd\u7ed8\u4e0e\u56de\u6d41\uff0c\u800c",(0,c.jsx)(d.code,{children:"diff"}),"\u7b97\u6cd5\u80fd\u591f\u4f7f\u5f97\u64cd\u4f5c\u8fc7\u7a0b\u4e2d\u53ea\u66f4\u65b0\u4fee\u6539\u7684\u90a3\u90e8\u5206",(0,c.jsx)(d.code,{children:"DOM"}),"\u7ed3\u6784\u800c\u4e0d\u66f4\u65b0\u6574\u4e2a",(0,c.jsx)(d.code,{children:"DOM"}),"\uff0c\u8fd9\u6837\u80fd\u591f\u6700\u5c0f\u5316\u64cd\u4f5c",(0,c.jsx)(d.code,{children:"DOM"}),"\u7ed3\u6784\uff0c\u80fd\u591f\u6700\u5927\u7a0b\u5ea6\u4e0a\u51cf\u5c11\u6d4f\u89c8\u5668\u91cd\u7ed8\u4e0e\u56de\u6d41\u7684\u89c4\u6a21\u3002"]}),"\n",(0,c.jsx)(d.h2,{id:"\u865a\u62dfdom",children:"\u865a\u62dfDOM"}),"\n",(0,c.jsxs)(d.p,{children:[(0,c.jsx)(d.code,{children:"diff"}),"\u7b97\u6cd5\u7684\u57fa\u7840\u662f",(0,c.jsx)(d.code,{children:"Virtual DOM"}),"\uff0c",(0,c.jsx)(d.code,{children:"Virtual DOM"}),"\u662f\u4e00\u68f5\u4ee5",(0,c.jsx)(d.code,{children:"JavaScript"}),"\u5bf9\u8c61\u4f5c\u4e3a\u57fa\u7840\u7684\u6811\uff0c\u6bcf\u4e00\u4e2a\u8282\u70b9\u79f0\u4e3a",(0,c.jsx)(d.code,{children:"VNode"}),"\uff0c\u7528\u5bf9\u8c61\u5c5e\u6027\u6765\u63cf\u8ff0\u8282\u70b9\uff0c\u5b9e\u9645\u4e0a\u5b83\u662f\u4e00\u5c42\u5bf9\u771f\u5b9e",(0,c.jsx)(d.code,{children:"DOM"}),"\u7684\u62bd\u8c61\uff0c\u6700\u7ec8\u53ef\u4ee5\u901a\u8fc7\u6e32\u67d3\u64cd\u4f5c\u4f7f\u8fd9\u68f5\u6811\u6620\u5c04\u5230\u771f\u5b9e\u73af\u5883\u4e0a\uff0c\u7b80\u5355\u6765\u8bf4",(0,c.jsx)(d.code,{children:"Virtual DOM"}),"\u5c31\u662f\u4e00\u4e2a",(0,c.jsx)(d.code,{children:"Js"}),"\u5bf9\u8c61\uff0c\u7528\u4ee5\u63cf\u8ff0\u6574\u4e2a\u6587\u6863\u3002",(0,c.jsx)(d.br,{}),"\n","\u5728\u6d4f\u89c8\u5668\u4e2d\u6784\u5efa\u9875\u9762\u65f6\u9700\u8981\u4f7f\u7528",(0,c.jsx)(d.code,{children:"DOM"}),"\u8282\u70b9\u63cf\u8ff0\u6574\u4e2a\u6587\u6863\u3002"]}),"\n",(0,c.jsx)(d.pre,{children:(0,c.jsx)(d.code,{className:"language-html",children:'<div class="root" name="root">\r\n    <p>1</p>\r\n    <div>11</div>\r\n</div>\n'})}),"\n",(0,c.jsxs)(d.p,{children:["\u5982\u679c\u4f7f\u7528",(0,c.jsx)(d.code,{children:"Js"}),"\u5bf9\u8c61\u53bb\u63cf\u8ff0\u4e0a\u8ff0\u7684\u8282\u70b9\u4ee5\u53ca\u6587\u6863\uff0c\u90a3\u4e48\u4fbf\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684\u6837\u5b50\uff0c\u5f53\u7136\u8fd9\u4e0d\u662f",(0,c.jsx)(d.code,{children:"Vue"}),"\u4e2d\u7528\u4ee5\u63cf\u8ff0\u8282\u70b9\u7684\u5bf9\u8c61\uff0c",(0,c.jsx)(d.code,{children:"Vue"}),"\u4e2d\u7528\u4ee5\u63cf\u8ff0\u4e00\u4e2a\u8282\u70b9\u7684\u5bf9\u8c61\u5305\u62ec\u5927\u91cf\u5c5e\u6027\uff0c\u4f8b\u5982",(0,c.jsx)(d.code,{children:"tag"}),"\u3001",(0,c.jsx)(d.code,{children:"data"}),"\u3001",(0,c.jsx)(d.code,{children:"children"}),"\u3001",(0,c.jsx)(d.code,{children:"text"}),"\u3001",(0,c.jsx)(d.code,{children:"elm"}),"\u3001",(0,c.jsx)(d.code,{children:"ns"}),"\u3001",(0,c.jsx)(d.code,{children:"context"}),"\u3001",(0,c.jsx)(d.code,{children:"key"}),"\u3001",(0,c.jsx)(d.code,{children:"componentOptions"}),"\u3001",(0,c.jsx)(d.code,{children:"componentInstance"}),"\u3001",(0,c.jsx)(d.code,{children:"parent"}),"\u3001",(0,c.jsx)(d.code,{children:"raw"}),"\u3001",(0,c.jsx)(d.code,{children:"isStatic"}),"\u3001",(0,c.jsx)(d.code,{children:"isRootInsert"}),"\u3001",(0,c.jsx)(d.code,{children:"isComment"}),"\u3001",(0,c.jsx)(d.code,{children:"isCloned"}),"\u7b49\u7b49\uff0c\u5177\u4f53\u7684\u5c5e\u6027\u53ef\u4ee5\u53c2\u9605",(0,c.jsx)(d.code,{children:"Vue"}),"\u6e90\u7801\u7684",(0,c.jsx)(d.code,{children:"/dev/src/core/vdom/vnode.js"}),"\u3002"]}),"\n",(0,c.jsx)(d.pre,{children:(0,c.jsx)(d.code,{className:"language-javascript",children:'{\r\n    type: "tag",\r\n    tagName: "div",\r\n    attr: {\r\n        className: "root"\r\n        name: "root"\r\n    },\r\n    parent: null,\r\n    children: [{\r\n        type: "tag",\r\n        tagName: "p",\r\n        attr: {},\r\n        parent: {} /* \u7236\u8282\u70b9\u7684\u5f15\u7528 */, \r\n        children: [{\r\n            type: "text",\r\n            tagName: "text",\r\n            parent: {} /* \u7236\u8282\u70b9\u7684\u5f15\u7528 */, \r\n            content: "1"\r\n        }]\r\n    },{\r\n        type: "tag",\r\n        tagName: "div",\r\n        attr: {},\r\n        parent: {} /* \u7236\u8282\u70b9\u7684\u5f15\u7528 */, \r\n        children: [{\r\n            type: "text",\r\n            tagName: "text",\r\n            parent: {} /* \u7236\u8282\u70b9\u7684\u5f15\u7528 */, \r\n            content: "11"\r\n        }]\r\n    }]\r\n}\n'})}),"\n",(0,c.jsxs)(d.p,{children:["\u5f53\u9009\u7528",(0,c.jsx)(d.code,{children:"diff"}),"\u7b97\u6cd5\u8fdb\u884c\u90e8\u5206\u66f4\u65b0\u7684\u65f6\u5019\u5c31\u9700\u8981\u6bd4\u8f83\u65e7",(0,c.jsx)(d.code,{children:"DOM"}),"\u7ed3\u6784\u4e0e\u65b0",(0,c.jsx)(d.code,{children:"DOM"}),"\u7ed3\u6784\u7684\u4e0d\u540c\uff0c\u6b64\u65f6\u5c31\u9700\u8981",(0,c.jsx)(d.code,{children:"VNode"}),"\u6765\u63cf\u8ff0\u6574\u4e2a",(0,c.jsx)(d.code,{children:"DOM"}),"\u7ed3\u6784\uff0c\u9996\u5148\u6839\u636e\u771f\u5b9e",(0,c.jsx)(d.code,{children:"DOM"}),"\u751f\u6210",(0,c.jsx)(d.code,{children:"Virtual DOM"}),"\uff0c\u5f53",(0,c.jsx)(d.code,{children:"Virtual DOM"}),"\u67d0\u4e2a\u8282\u70b9\u7684\u6570\u636e\u6539\u53d8\u540e\u4f1a\u751f\u6210\u4e00\u4e2a\u65b0\u7684",(0,c.jsx)(d.code,{children:"Vnode"}),"\uff0c\u7136\u540e\u901a\u8fc7",(0,c.jsx)(d.code,{children:"newVNode"}),"\u548c",(0,c.jsx)(d.code,{children:"oldVNode"}),"\u8fdb\u884c\u5bf9\u6bd4\uff0c\u53d1\u73b0\u6709\u4e0d\u540c\u4e4b\u5904\u4fbf\u901a\u8fc7\u5728",(0,c.jsx)(d.code,{children:"VNode"}),"\u4e2d",(0,c.jsx)(d.code,{children:"elm"}),"\u5c5e\u6027\u76f8\u5bf9\u5e94\u7684\u771f\u5b9e",(0,c.jsx)(d.code,{children:"DOM"}),"\u8282\u70b9\u8fdb\u884c",(0,c.jsx)(d.code,{children:"patch"}),"\u4fee\u6539\u4e8e\u771f\u5b9e",(0,c.jsx)(d.code,{children:"DOM"}),"\uff0c\u7136\u540e\u4f7f\u65e7\u7684",(0,c.jsx)(d.code,{children:"Virtual DOM"}),"\u8d4b\u503c\u4e3a\u65b0\u7684",(0,c.jsx)(d.code,{children:"Virtual DOM"}),"\u3002"]}),"\n",(0,c.jsx)(d.h2,{id:"diff\u7b97\u6cd5",children:"diff\u7b97\u6cd5"}),"\n",(0,c.jsxs)(d.p,{children:["\u5f53\u6570\u636e\u53d1\u751f\u6539\u53d8\u65f6\uff0c",(0,c.jsx)(d.code,{children:"set"}),"\u65b9\u6cd5\u4f1a\u8ba9\u8c03\u7528",(0,c.jsx)(d.code,{children:"Dep.notify"}),"\u901a\u77e5\u6240\u6709\u8ba2\u9605\u8005",(0,c.jsx)(d.code,{children:"Watcher"}),"\u6570\u636e\u53d1\u751f\u66f4\u65b0\uff0c\u8ba2\u9605\u8005\u5c31\u4f1a\u8c03\u7528",(0,c.jsx)(d.code,{children:"patch"}),"\u8fdb\u884c\u6bd4\u8f83\uff0c\u7136\u540e\u5c06\u76f8\u5e94\u7684\u90e8\u5206\u6e32\u67d3\u5230\u771f\u5b9e",(0,c.jsx)(d.code,{children:"DOM"}),"\u7ed3\u6784\u3002"]}),"\n",(0,c.jsx)(d.h3,{id:"\u65f6\u95f4\u590d\u6742\u5ea6",children:"\u65f6\u95f4\u590d\u6742\u5ea6"}),"\n",(0,c.jsxs)(d.p,{children:["\u9996\u5148\u8fdb\u884c\u4e00\u6b21\u5b8c\u6574\u7684",(0,c.jsx)(d.code,{children:"diff"}),"\u9700\u8981",(0,c.jsx)(d.code,{children:"O(n^3)"}),"\u7684\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u8fd9\u662f\u4e00\u4e2a\u6700\u5c0f\u7f16\u8f91\u8ddd\u79bb\u7684\u95ee\u9898\uff0c\u5728\u6bd4\u8f83\u5b57\u7b26\u4e32\u7684\u6700\u5c0f\u7f16\u8f91\u8ddd\u79bb\u65f6\u4f7f\u7528\u52a8\u6001\u89c4\u5212\u7684\u65b9\u6848\u9700\u8981\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f",(0,c.jsx)(d.code,{children:"O(mn)"}),"\uff0c\u4f46\u662f\u5bf9\u4e8e",(0,c.jsx)(d.code,{children:"DOM"}),"\u6765\u8bf4\u662f\u4e00\u4e2a\u6811\u5f62\u7ed3\u6784\uff0c\u800c\u6811\u5f62\u7ed3\u6784\u7684\u6700\u5c0f\u7f16\u8f91\u8ddd\u79bb\u95ee\u9898\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5728",(0,c.jsx)(d.code,{children:"30"}),"\u591a\u5e74\u7684\u6f14\u8fdb\u4e2d\u4ece",(0,c.jsx)(d.code,{children:"O(m^3n^3)"}),"\u6f14\u8fdb\u5230\u4e86",(0,c.jsx)(d.code,{children:"O(n^3)"}),"\uff0c\u5173\u4e8e\u8fd9\u4e2a\u95ee\u9898\u5982\u679c\u6709\u5174\u8da3\u7684\u8bdd\u53ef\u4ee5\u7814\u7a76\u4e00\u4e0b\u8bba\u6587",(0,c.jsx)(d.code,{children:"https://grfia.dlsi.ua.es/ml/algorithms/references/editsurvey_bille.pdf"}),"\u3002",(0,c.jsx)(d.br,{}),"\n","\u5bf9\u4e8e\u539f\u672c\u60f3\u8981\u63d0\u9ad8\u6548\u7387\u800c\u5f15\u5165\u7684",(0,c.jsx)(d.code,{children:"diff"}),"\u7b97\u6cd5\u4f7f\u7528",(0,c.jsx)(d.code,{children:"O(n^3)"}),"\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u663e\u7136\u662f\u4e0d\u592a\u5408\u9002\u7684\uff0c\u5982\u679c\u6709",(0,c.jsx)(d.code,{children:"1000"}),"\u4e2a\u8282\u70b9\u5143\u7d20\u5c06\u9700\u8981\u8fdb\u884c\u5341\u4ebf\u6b21\u6bd4\u8f83\uff0c\u8fd9\u662f\u4e00\u4e2a\u6602\u8d35\u7684\u7b97\u6cd5\uff0c\u6240\u4ee5\u5fc5\u987b\u6709\u4e00\u4e9b\u59a5\u534f\u6765\u52a0\u5feb\u901f\u5ea6\uff0c\u5bf9\u6bd4\u8f83\u901a\u8fc7\u4e00\u4e9b\u7b56\u7565\u8fdb\u884c\u7b80\u5316\uff0c\u5c06\u65f6\u95f4\u590d\u6742\u5ea6\u7f29\u5c0f\u5230",(0,c.jsx)(d.code,{children:"O(n)"}),"\uff0c\u867d\u7136\u5e76\u4e0d\u662f\u6700\u5c0f\u7f16\u8f91\u8ddd\u79bb\uff0c\u4f46\u662f\u4f5c\u4e3a\u7f16\u8f91\u8ddd\u79bb\u4e0e\u65f6\u95f4\u6027\u80fd\u7684\u6298\u4e2d\u662f\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684\u89e3\u51b3\u65b9\u6848\u3002"]}),"\n",(0,c.jsx)(d.h3,{id:"diff\u7b56\u7565",children:"diff\u7b56\u7565"}),"\n",(0,c.jsxs)(d.p,{children:["\u4e0a\u8fb9\u63d0\u5230\u7684",(0,c.jsx)(d.code,{children:"O(n)"}),"\u65f6\u95f4\u590d\u6742\u5ea6\u662f\u901a\u8fc7\u4e00\u5b9a\u7b56\u7565\u8fdb\u884c\u7684\uff0c",(0,c.jsx)(d.code,{children:"React"}),"\u4e2d\u63d0\u5230\u4e86\u4e24\u4e2a\u5047\u8bbe\uff0c\u5728",(0,c.jsx)(d.code,{children:"Vue"}),"\u4e2d\u540c\u6837\u9002\u7528\uff1a"]}),"\n",(0,c.jsxs)(d.ul,{children:["\n",(0,c.jsx)(d.li,{children:"\u4e24\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684\u5143\u7d20\u5c06\u4ea7\u751f\u4e0d\u540c\u7684\u6811\u3002"}),"\n",(0,c.jsxs)(d.li,{children:["\u901a\u8fc7\u6e32\u67d3\u5668\u9644\u5e26",(0,c.jsx)(d.code,{children:"key"}),"\u5c5e\u6027\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u793a\u610f\u54ea\u4e9b\u5b50\u5143\u7d20\u53ef\u80fd\u662f\u7a33\u5b9a\u7684\u3002"]}),"\n"]}),"\n",(0,c.jsx)(d.p,{children:"\u901a\u4fd7\u70b9\u8bf4\u5c31\u662f\uff1a"}),"\n",(0,c.jsxs)(d.ul,{children:["\n",(0,c.jsx)(d.li,{children:"\u53ea\u8fdb\u884c\u7edf\u4e00\u5c42\u7ea7\u7684\u6bd4\u8f83\uff0c\u5982\u679c\u8de8\u5c42\u7ea7\u7684\u79fb\u52a8\u5219\u89c6\u4e3a\u521b\u5efa\u548c\u5220\u9664\u64cd\u4f5c\u3002"}),"\n",(0,c.jsx)(d.li,{children:"\u5982\u679c\u662f\u4e0d\u540c\u7c7b\u578b\u7684\u5143\u7d20\uff0c\u5219\u8ba4\u4e3a\u662f\u521b\u5efa\u4e86\u65b0\u7684\u5143\u7d20\uff0c\u800c\u4e0d\u4f1a\u9012\u5f52\u6bd4\u8f83\u4ed6\u4eec\u7684\u5b69\u5b50\u3002"}),"\n",(0,c.jsxs)(d.li,{children:["\u5982\u679c\u662f\u5217\u8868\u5143\u7d20\u7b49\u6bd4\u8f83\u76f8\u4f3c\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u901a\u8fc7",(0,c.jsx)(d.code,{children:"key"}),"\u6765\u552f\u4e00\u786e\u5b9a\u662f\u79fb\u52a8\u8fd8\u662f\u521b\u5efa\u6216\u5220\u9664\u64cd\u4f5c\u3002"]}),"\n"]}),"\n",(0,c.jsx)(d.p,{children:"\u6bd4\u8f83\u540e\u4f1a\u51fa\u73b0\u51e0\u79cd\u60c5\u51b5\uff0c\u7136\u540e\u8fdb\u884c\u76f8\u5e94\u7684\u64cd\u4f5c\uff1a"}),"\n",(0,c.jsxs)(d.ul,{children:["\n",(0,c.jsxs)(d.li,{children:["\u6b64\u8282\u70b9\u88ab\u6dfb\u52a0\u6216\u79fb\u9664",(0,c.jsx)(d.code,{children:"->"}),"\u6dfb\u52a0\u6216\u79fb\u9664\u65b0\u7684\u8282\u70b9\u3002"]}),"\n",(0,c.jsxs)(d.li,{children:["\u5c5e\u6027\u88ab\u6539\u53d8",(0,c.jsx)(d.code,{children:"->"}),"\u65e7\u5c5e\u6027\u6539\u4e3a\u65b0\u5c5e\u6027\u3002"]}),"\n",(0,c.jsxs)(d.li,{children:["\u6587\u672c\u5185\u5bb9\u88ab\u6539\u53d8",(0,c.jsx)(d.code,{children:"->"}),"\u65e7\u5185\u5bb9\u6539\u4e3a\u65b0\u5185\u5bb9\u3002"]}),"\n",(0,c.jsxs)(d.li,{children:["\u8282\u70b9",(0,c.jsx)(d.code,{children:"tag"}),"\u6216",(0,c.jsx)(d.code,{children:"key"}),"\u662f\u5426\u6539\u53d8",(0,c.jsx)(d.code,{children:"->"}),"\u6539\u53d8\u5219\u79fb\u9664\u540e\u521b\u5efa\u65b0\u5143\u7d20\u3002"]}),"\n"]}),"\n",(0,c.jsx)(d.h3,{id:"\u5206\u6790",children:"\u5206\u6790"}),"\n",(0,c.jsxs)(d.p,{children:["\u5b9e\u73b0",(0,c.jsx)(d.code,{children:"diff"}),"\u7b97\u6cd5\u7684\u90e8\u5206\u5728",(0,c.jsx)(d.code,{children:"Vue"}),"\u6e90\u7801\u4e2d\u7684",(0,c.jsx)(d.code,{children:"dev/src/core/vdom/patch.js"}),"\u6587\u4ef6\u4e2d\uff0c\u4e0d\u8fc7",(0,c.jsx)(d.code,{children:"Vue"}),"\u6e90\u7801\u7684\u5b9e\u73b0\u6bd4\u8f83\u590d\u6742\uff0c\u6587\u7ae0\u5206\u6790\u6bd4\u8f83\u6838\u5fc3\u7684\u4ee3\u7801\u90e8\u5206\uff0c\u7cbe\u7b80\u8fc7\u540e\u7684\u6700\u5c0f\u5316\u7248\u672c\uff0c",(0,c.jsx)(d.code,{children:"commit id"}),"\u4e3a",(0,c.jsx)(d.code,{children:"43b98fe"}),"\u3002",(0,c.jsx)(d.br,{}),"\n","\u5728\u8c03\u7528",(0,c.jsx)(d.code,{children:"patch"}),"\u65b9\u6cd5\u65f6\uff0c\u4f1a\u5224\u65ad\u662f\u5426\u662f",(0,c.jsx)(d.code,{children:"VNode"}),"\uff0c",(0,c.jsx)(d.code,{children:"isRealElement"}),"\u5176\u5b9e\u5c31\u662f\u6839\u636e\u6709\u6ca1\u6709",(0,c.jsx)(d.code,{children:"nodeType"}),"\u6765\u5224\u65ad\u662f\u4e0d\u662f\u771f\u5b9e",(0,c.jsx)(d.code,{children:"DOM"}),"\uff0c",(0,c.jsx)(d.code,{children:"VNode"}),"\u662f\u4e0d\u5b58\u5728\u8fd9\u4e2a\u5b57\u6bb5\u7684\uff0c\u5982\u679c\u4e0d\u662f\u771f\u5b9e",(0,c.jsx)(d.code,{children:"DOM"}),"\u5143\u7d20\uff0c\u5e76\u4e14\u8fd9\u4e24\u4e2a\u8282\u70b9\u662f\u76f8\u540c\u7684\uff0c\u90a3\u5c31\u5c31\u4f1a\u8fdb\u5165\u8fd9\u4e2a",(0,c.jsx)(d.code,{children:"if"}),"\u5185\u90e8\uff0c\u8c03\u7528",(0,c.jsx)(d.code,{children:"patchVnode"}),"\u5bf9",(0,c.jsx)(d.code,{children:"children"}),"\u8fdb\u884c",(0,c.jsx)(d.code,{children:"diff"}),"\u4ee5\u51b3\u5b9a\u8be5\u5982\u4f55\u66f4\u65b0\u3002"]}),"\n",(0,c.jsx)(d.pre,{children:(0,c.jsx)(d.code,{className:"language-javascript",children:"// line 714\r\nconst isRealElement = isDef(oldVnode.nodeType)\r\nif (!isRealElement && sameVnode(oldVnode, vnode)) {\r\n    // patch existing root node\r\n    patchVnode(oldVnode, vnode, insertedVnodeQueue, null, null, removeOnly)\r\n}else{\r\n    // ...\r\n}\n"})}),"\n",(0,c.jsxs)(d.p,{children:["\u63a5\u4e0b\u6765\u770b\u4e00\u4e0b",(0,c.jsx)(d.code,{children:"sameVnode"}),"\u65b9\u6cd5\uff0c\u5224\u65ad\u5982\u4f55\u7b97\u662f\u76f8\u540c\u8282\u70b9\u3002"]}),"\n",(0,c.jsx)(d.pre,{children:(0,c.jsx)(d.code,{className:"language-javascript",children:"// line 35\r\nfunction sameVnode (a, b) {\r\n  return (\r\n    a.key === b.key && (\r\n      (\r\n        a.tag === b.tag &&\r\n        a.isComment === b.isComment &&\r\n        isDef(a.data) === isDef(b.data) &&\r\n        sameInputType(a, b)\r\n      ) || (\r\n        isTrue(a.isAsyncPlaceholder) &&\r\n        a.asyncFactory === b.asyncFactory &&\r\n        isUndef(b.asyncFactory.error)\r\n      )\r\n    )\r\n  )\r\n}\n"})}),"\n",(0,c.jsx)(d.p,{children:"\u8fd9\u91cc\u7684\u5224\u65ad\u6761\u4ef6\u5176\u5b9e\u4e3b\u8981\u662f\u4e24\u4e2a\uff1a"}),"\n",(0,c.jsxs)(d.ul,{children:["\n",(0,c.jsxs)(d.li,{children:[(0,c.jsx)(d.code,{children:"key"}),"\u5fc5\u987b\u76f8\u540c\uff0c\u5982\u679c\u90fd\u662f",(0,c.jsx)(d.code,{children:"undefined"}),"\u5219\u4e5f\u662f\u76f8\u540c\u7684\u3002"]}),"\n",(0,c.jsxs)(d.li,{children:[(0,c.jsx)(d.code,{children:"DOM"}),"\u5143\u7d20\u7684\u6807\u7b7e\u5fc5\u987b\u76f8\u540c\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(d.p,{children:["\u5982\u679c\u6ee1\u8db3\u4ee5\u4e0a\u6761\u4ef6\uff0c\u90a3\u4e48\u5c31\u8ba4\u4e3a\u662f\u76f8\u540c\u7684",(0,c.jsx)(d.code,{children:"VNode"}),"\uff0c\u56e0\u6b64\u5c31\u53ef\u4ee5\u8fdb\u884c",(0,c.jsx)(d.code,{children:"patchVnode"}),"\u64cd\u4f5c\uff0c\u5982\u679c\u4e0d\u662f\u5c31\u8ba4\u4e3a\u662f\u5b8c\u5168\u65b0\u7684\u4e00\u4e2a",(0,c.jsx)(d.code,{children:"VNode"}),"\uff0c\u5c31\u4f1a\u5728\u4e0a\u8fb9\u7684\u5224\u65ad\u540e\u6267\u884c\u4e0b\u9762\u7684",(0,c.jsx)(d.code,{children:"createElm"}),"\u3002",(0,c.jsx)(d.br,{}),"\n","\u68b3\u7406\u4e00\u4e0b\u903b\u8f91\uff0c\u5f53\u8fdb\u5165",(0,c.jsx)(d.code,{children:"patch"}),"\u4e4b\u540e\u6709\u4e24\u79cd\u5206\u652f\u53ef\u4ee5\u8d70\uff0c\u5982\u679c\u662f\u7b2c\u4e00\u6b21",(0,c.jsx)(d.code,{children:"patch"}),"\uff0c\u5373\u7ec4\u4ef6\u7b2c\u4e00\u6b21\u6302\u8f7d\u7684\u65f6\u5019\uff0c\u6216\u8005\u53d1\u73b0\u5143\u7d20\u7684\u6807\u7b7e\u4e0d\u76f8\u540c\u4e86\uff0c\u90a3\u4e48\u5c31\u8ba4\u4e3a\u662f\u4e0d\u540c\u7684\u5143\u7d20\uff0c\u76f4\u63a5\u8fdb\u884c",(0,c.jsx)(d.code,{children:"createElm"})," \u521b\u5efa\u65b0\u7684",(0,c.jsx)(d.code,{children:"DOM"}),"\u5143\u7d20\u8fdb\u884c\u66ff\u6362\uff0c\u5426\u5219\uff0c\u5c31\u662f\u5bf9\u5df2\u5b58\u5728\u7684",(0,c.jsx)(d.code,{children:"DOM"}),"\u5143\u7d20\u8fdb\u884c\u66f4\u65b0\uff0c\u90a3\u4e48\u901a\u8fc7",(0,c.jsx)(d.code,{children:"patchVnode"}),"\u8fdb\u884c",(0,c.jsx)(d.code,{children:"diff"}),"\uff0c\u6709\u6761\u4ef6\u7684\u66f4\u65b0\u4ee5\u63d0\u5347\u6027\u80fd\uff0c\u8fd9\u6837\u5176\u5b9e\u5c31\u5b9e\u73b0\u4e86\u7b56\u7565\u4e2d\u539f\u5219\u7684\u7b2c\u4e00\u6761\uff0c\u5373\u4e24\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684\u5143\u7d20\u5c06\u4ea7\u751f\u4e0d\u540c\u7684\u6811\uff0c\u53ea\u8981\u53d1\u73b0\u4e24\u4e2a\u5143\u7d20\u7684\u7c7b\u578b\u4e0d\u540c\uff0c\u6211\u4eec\u76f4\u63a5\u5220\u9664\u65e7\u7684\u5e76\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\uff0c\u800c\u4e0d\u662f\u53bb\u9012\u5f52\u6bd4\u8f83\u3002",(0,c.jsx)(d.br,{}),"\n","\u5728\u8ba4\u4e3a\u8fd9\u662f\u4e24\u4e2a\u76f8\u540c\u7684",(0,c.jsx)(d.code,{children:"VNode"}),"\u4e4b\u540e\uff0c\u5c31\u9700\u8981\u6bd4\u8f83\u5e76\u66f4\u65b0\u5f53\u524d\u5143\u7d20\u7684\u5dee\u5f02\uff0c\u4ee5\u53ca\u9012\u5f52\u6bd4\u8f83",(0,c.jsx)(d.code,{children:"children"}),"\uff0c\u5728",(0,c.jsx)(d.code,{children:"patchVnode"}),"\u65b9\u6cd5\u4e2d\u5b9e\u73b0\u4e86\u8fd9\u4e24\u90e8\u5206\u3002"]}),"\n",(0,c.jsx)(d.pre,{children:(0,c.jsx)(d.code,{className:"language-javascript",children:"// line 501\r\nfunction patchVnode (oldVnode, vnode, insertedVnodeQueue, removeOnly) {\r\n    // ...\r\n    if (isDef(data) && isPatchable(vnode)) {\r\n      for (i = 0; i < cbs.update.length; ++i) cbs.update[i](oldVnode, vnode)\r\n      if (isDef(i = data.hook) && isDef(i = i.update)) i(oldVnode, vnode)\r\n    }\r\n    //...\r\n}\n"})}),"\n",(0,c.jsxs)(d.p,{children:[(0,c.jsx)(d.code,{children:"cbs.update"}),"\u4e3b\u8981\u662f\u7528\u6765\u66f4\u65b0",(0,c.jsx)(d.code,{children:"attributes"}),"\u7684\uff0c\u8fd9\u91cc\u7684",(0,c.jsx)(d.code,{children:"cbs"}),"\u5176\u5b9e\u662f\u4ece",(0,c.jsx)(d.code,{children:"hooks"}),"\u4e2d\u6765\u7684\uff0c",(0,c.jsx)(d.code,{children:"hooks"}),"\u5728",(0,c.jsx)(d.code,{children:"33"}),"\u884c\u6709\u5982\u4e0b\u5b9a\u4e49\uff0c",(0,c.jsx)(d.code,{children:"const hooks = ['create', 'activate', 'update', 'remove', 'destroy']"}),"\uff0c\u5176\u662f\u5728",(0,c.jsx)(d.code,{children:"VNode"}),"\u66f4\u65b0\u7684\u5404\u4e2a\u9636\u6bb5\u8fdb\u884c\u76f8\u5e94\u7684\u64cd\u4f5c\uff0c\u8fd9\u91cc",(0,c.jsx)(d.code,{children:"cbs.update"}),"\u5305\u542b\u5982\u4e0b\u51e0\u4e2a\u56de\u8c03\uff1a",(0,c.jsx)(d.code,{children:"updateAttrs"}),"\u3001",(0,c.jsx)(d.code,{children:"updateClass"}),"\u3001",(0,c.jsx)(d.code,{children:"updateDOMListeners"}),"\u3001",(0,c.jsx)(d.code,{children:"updateDOMProps"}),"\u3001",(0,c.jsx)(d.code,{children:"updateStyle"}),"\u3001",(0,c.jsx)(d.code,{children:"update"}),"\u3001",(0,c.jsx)(d.code,{children:"updateDirectives"}),"\uff0c\u5176\u4e3b\u8981\u90fd\u662f\u66f4\u65b0\u5f53\u524d\u7ed3\u70b9\u7684\u4e00\u4e9b\u76f8\u5173",(0,c.jsx)(d.code,{children:"attributes"}),"\u3002",(0,c.jsx)(d.br,{}),"\n","\u4e4b\u540e\u9700\u8981\u66f4\u65b0\u5b69\u5b50\u8282\u70b9\uff0c\u8fd9\u65f6\u5019\u5206\u4e24\u79cd\u60c5\u51b5\uff1a"]}),"\n",(0,c.jsxs)(d.ul,{children:["\n",(0,c.jsxs)(d.li,{children:["\u5982\u679c\u5b69\u5b50\u4e0d\u662f",(0,c.jsx)(d.code,{children:"textNode"}),"\uff0c\u90a3\u4e48\u9700\u8981\u518d\u5206\u4e09\u79cd\u60c5\u51b5\u5904\u7406\u3002"]}),"\n",(0,c.jsxs)(d.li,{children:["\u5982\u679c\u5f53\u524d\u5b69\u5b50\u662f",(0,c.jsx)(d.code,{children:"textNode"}),"\u90a3\u4e48\u76f4\u63a5\u66f4\u65b0",(0,c.jsx)(d.code,{children:"text"}),"\u5373\u53ef\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(d.p,{children:["\u5bf9\u5b69\u5b50\u662f",(0,c.jsx)(d.code,{children:"VNode"}),"\u7684\u4e09\u79cd\u60c5\u51b5\uff1a"]}),"\n",(0,c.jsxs)(d.ul,{children:["\n",(0,c.jsx)(d.li,{children:"\u6709\u65b0\u5b69\u5b50\u65e0\u65e7\u5b69\u5b50\uff0c\u76f4\u63a5\u521b\u5efa\u65b0\u7684\u3002"}),"\n",(0,c.jsx)(d.li,{children:"\u6709\u65e7\u5b69\u5b50\u65e0\u65b0\u5b69\u5b50\uff0c\u76f4\u63a5\u5220\u9664\u65e7\u7684\u3002"}),"\n",(0,c.jsxs)(d.li,{children:["\u65b0\u65e7\u5b69\u5b50\u90fd\u6709\uff0c\u90a3\u4e48\u8c03\u7528",(0,c.jsx)(d.code,{children:"updateChildren"}),"\u3002"]}),"\n"]}),"\n",(0,c.jsx)(d.pre,{children:(0,c.jsx)(d.code,{className:"language-javascript",children:"if (isUndef(vnode.text)) {\r\n  if (isDef(oldCh) && isDef(ch)) {\r\n    if (oldCh !== ch) updateChildren(elm, oldCh, ch, insertedVnodeQueue, removeOnly)\r\n  } else if (isDef(ch)) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      checkDuplicateKeys(ch)\r\n    }\r\n    if (isDef(oldVnode.text)) nodeOps.setTextContent(elm, '')\r\n    addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue)\r\n  } else if (isDef(oldCh)) {\r\n    removeVnodes(oldCh, 0, oldCh.length - 1)\r\n  } else if (isDef(oldVnode.text)) {\r\n    nodeOps.setTextContent(elm, '')\r\n  }\r\n} else if (oldVnode.text !== vnode.text) {\r\n  nodeOps.setTextContent(elm, vnode.text)\r\n}\n"})}),"\n",(0,c.jsxs)(d.p,{children:["\u5f53\u65b0\u65e7\u5b69\u5b50\u90fd\u5b58\u5728\uff0c\u90a3\u4e48\u4fbf\u8c03\u7528",(0,c.jsx)(d.code,{children:"updateChildren"}),"\u65b9\u6cd5\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5b69\u5b50\u8282\u70b9\uff0c\u6211\u4eec\u4f9d\u7136\u6709\u8fd9\u4e48\u51e0\u79cd\u53ef\u80fd\uff1a"]}),"\n",(0,c.jsxs)(d.ul,{children:["\n",(0,c.jsx)(d.li,{children:"\u66f4\u65b0\u4e86\u8282\u70b9"}),"\n",(0,c.jsx)(d.li,{children:"\u5220\u9664\u4e86\u8282\u70b9"}),"\n",(0,c.jsx)(d.li,{children:"\u589e\u52a0\u4e86\u8282\u70b9"}),"\n",(0,c.jsx)(d.li,{children:"\u79fb\u52a8\u4e86\u8282\u70b9"}),"\n"]}),"\n",(0,c.jsxs)(d.p,{children:[(0,c.jsx)(d.code,{children:"updateChildren"}),"\u662f",(0,c.jsx)(d.code,{children:"diff"}),"\u7684\u6838\u5fc3\u7b97\u6cd5\uff0c\u6e90\u4ee3\u7801\u5b9e\u73b0\u5982\u4e0b\u3002"]}),"\n",(0,c.jsx)(d.pre,{children:(0,c.jsx)(d.code,{className:"language-javascript",children:"// line 404\r\nfunction updateChildren (parentElm, oldCh, newCh, insertedVnodeQueue, removeOnly) {\r\n    let oldStartIdx = 0\r\n    let newStartIdx = 0\r\n    let oldEndIdx = oldCh.length - 1\r\n    let oldStartVnode = oldCh[0]\r\n    let oldEndVnode = oldCh[oldEndIdx]\r\n    let newEndIdx = newCh.length - 1\r\n    let newStartVnode = newCh[0]\r\n    let newEndVnode = newCh[newEndIdx]\r\n    let oldKeyToIdx, idxInOld, vnodeToMove, refElm\r\n    \r\n    // removeOnly is a special flag used only by <transition-group>\r\n    // to ensure removed elements stay in correct relative positions\r\n    // during leaving transitions\r\n    const canMove = !removeOnly\r\n    \r\n    if (process.env.NODE_ENV !== 'production') {\r\n      checkDuplicateKeys(newCh)\r\n    }\r\n    \r\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\r\n      if (isUndef(oldStartVnode)) {\r\n        oldStartVnode = oldCh[++oldStartIdx] // Vnode has been moved left\r\n      } else if (isUndef(oldEndVnode)) {\r\n        oldEndVnode = oldCh[--oldEndIdx]\r\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\r\n        patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx)\r\n        oldStartVnode = oldCh[++oldStartIdx]\r\n        newStartVnode = newCh[++newStartIdx]\r\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\r\n        patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx)\r\n        oldEndVnode = oldCh[--oldEndIdx]\r\n        newEndVnode = newCh[--newEndIdx]\r\n      } else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved right\r\n        patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx)\r\n        canMove && nodeOps.insertBefore(parentElm, oldStartVnode.elm, nodeOps.nextSibling(oldEndVnode.elm))\r\n        oldStartVnode = oldCh[++oldStartIdx]\r\n        newEndVnode = newCh[--newEndIdx]\r\n      } else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved left\r\n        patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx)\r\n        canMove && nodeOps.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm)\r\n        oldEndVnode = oldCh[--oldEndIdx]\r\n        newStartVnode = newCh[++newStartIdx]\r\n      } else {\r\n        if (isUndef(oldKeyToIdx)) oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx)\r\n        idxInOld = isDef(newStartVnode.key)\r\n          ? oldKeyToIdx[newStartVnode.key]\r\n          : findIdxInOld(newStartVnode, oldCh, oldStartIdx, oldEndIdx)\r\n        if (isUndef(idxInOld)) { // New element\r\n          createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx)\r\n        } else {\r\n          vnodeToMove = oldCh[idxInOld]\r\n          if (sameVnode(vnodeToMove, newStartVnode)) {\r\n            patchVnode(vnodeToMove, newStartVnode, insertedVnodeQueue, newCh, newStartIdx)\r\n            oldCh[idxInOld] = undefined\r\n            canMove && nodeOps.insertBefore(parentElm, vnodeToMove.elm, oldStartVnode.elm)\r\n          } else {\r\n            // same key but different element. treat as new element\r\n            createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx)\r\n          }\r\n        }\r\n        newStartVnode = newCh[++newStartIdx]\r\n      }\r\n    }\r\n    if (oldStartIdx > oldEndIdx) {\r\n      refElm = isUndef(newCh[newEndIdx + 1]) ? null : newCh[newEndIdx + 1].elm\r\n      addVnodes(parentElm, refElm, newCh, newStartIdx, newEndIdx, insertedVnodeQueue)\r\n    } else if (newStartIdx > newEndIdx) {\r\n      removeVnodes(oldCh, oldStartIdx, oldEndIdx)\r\n    }\r\n}\n"})}),"\n",(0,c.jsxs)(d.p,{children:["\u5176\u5bf9\u65b0\u65e7\u4e24\u4e2a",(0,c.jsx)(d.code,{children:"children"}),"\u6570\u7ec4\u5206\u522b\u5728\u9996\u4f4d\u5404\u7528\u4e86\u4e00\u4e2a\u6307\u9488\uff0c\u603b\u5171\u56db\u4e2a\u6307\u9488\uff0c\u7531\u4e8e\u6307\u9488\u4ec5\u4ec5\u5bf9\u6570\u7ec4\u8fdb\u884c\u4e86\u4e00\u6b21\u904d\u5386\uff0c\u56e0\u6b64\u65f6\u95f4\u590d\u6742\u5ea6\u662f",(0,c.jsx)(d.code,{children:"O(n)"}),"\uff0c\u4e3e\u4e2a\u7b80\u5355\u4f8b\u5b50\u8bf4\u660e",(0,c.jsx)(d.code,{children:"diff"}),"\u8fc7\u7a0b\u3002"]}),"\n",(0,c.jsx)(d.pre,{children:(0,c.jsx)(d.code,{children:"old VNode: a(oldStartIdx) b c d e f(oldEndIdx)\r\nnew VNode: b(newStartIdx) f g(newEndIdx)\r\nDOM Node:  a b c d e f\n"})}),"\n",(0,c.jsxs)(d.p,{children:["\u9996\u5148\u6307\u9488\u76f8\u4e92\u6bd4\u8f83\uff0c\u5373\u56db\u79cd\u5bf9\u6bd4\uff0c\u5206\u522b\u4e3a",(0,c.jsx)(d.code,{children:"oldStartIdx"}),"\u548c",(0,c.jsx)(d.code,{children:"newStartIdx"}),"\u3001",(0,c.jsx)(d.code,{children:"oldStartIdx"}),"\u548c",(0,c.jsx)(d.code,{children:"newEndIdx"}),"\u3001",(0,c.jsx)(d.code,{children:"oldEndIdx"}),"\u548c",(0,c.jsx)(d.code,{children:"newStartIdx"}),"\u3001",(0,c.jsx)(d.code,{children:"oldEndIdx"}),"\u548c",(0,c.jsx)(d.code,{children:"newEndIdx"}),"\uff0c\u5982\u679c\u6ca1\u6709\u76f8\u7b49\u7684\u5219\u7ee7\u7eed\u3002\u6b64\u65f6\u5206\u4e3a\u4e24\u79cd\u60c5\u51b5\uff0c\u6709",(0,c.jsx)(d.code,{children:"key"}),"\u548c\u65e0",(0,c.jsx)(d.code,{children:"key"}),"\uff0c\u65e0",(0,c.jsx)(d.code,{children:"key"}),"\u5219\u76f4\u63a5\u521b\u5efa\u65b0\u7684",(0,c.jsx)(d.code,{children:"DOM Node"}),"\u63d2\u5165\u5230",(0,c.jsx)(d.code,{children:"a(oldStartIdx)"}),"\u4e4b\u524d\uff0c\u6b64\u5904\u8ba4\u4e3a",(0,c.jsx)(d.code,{children:"key"}),"\u5b58\u5728\uff0c\u6709",(0,c.jsx)(d.code,{children:"key"}),"\u7684\u8bdd\u53d6",(0,c.jsx)(d.code,{children:"newStartIdx"}),"\u7684",(0,c.jsx)(d.code,{children:"key"}),"\u503c\uff0c\u5230",(0,c.jsx)(d.code,{children:"old VNode"}),"\u53bb\u627e\uff0c\u8bb0\u5f55\u6b64\u65f6\u7684",(0,c.jsx)(d.code,{children:"oldKeyToIdx"}),"\uff0c\u968f\u5373\u8c03\u6574",(0,c.jsx)(d.code,{children:"VNode"}),"\uff0c\u5c06",(0,c.jsx)(d.code,{children:"b"}),"\u79fb\u52a8\u5230",(0,c.jsx)(d.code,{children:"a"}),"\u4e4b\u524d\uff0c\u7136\u540e\u627e\u5230",(0,c.jsx)(d.code,{children:"old VNode"}),"\u4e2d",(0,c.jsx)(d.code,{children:"oldKeyToIdx"}),"\u5bf9\u5e94\u7684\u8282\u70b9\u503c\u8bbe\u7f6e\u4e3a",(0,c.jsx)(d.code,{children:"undefined"}),"\uff0c",(0,c.jsx)(d.code,{children:"newStartIdx"}),"\u6307\u9488\u5411\u4e2d\u95f4\u9760\u62e2\uff0c\u5373",(0,c.jsx)(d.code,{children:"++newStartIdx"}),"\u3002"]}),"\n",(0,c.jsx)(d.pre,{children:(0,c.jsx)(d.code,{children:"old VNode: a(oldStartIdx) undefined c d e f(oldEndIdx)\r\nnew VNode: b f(newStartIdx) g(newEndIdx)\r\nDOM Node:  b a c d e f\n"})}),"\n",(0,c.jsxs)(d.p,{children:["\u5faa\u73af\u7ee7\u7eed\uff0c\u6b64\u65f6\u5bf9\u6bd4",(0,c.jsx)(d.code,{children:"oldStartIdx"}),"\u548c",(0,c.jsx)(d.code,{children:"newStartIdx"}),"\u3001",(0,c.jsx)(d.code,{children:"oldStartIdx"}),"\u548c",(0,c.jsx)(d.code,{children:"newEndIdx"}),"\u3001",(0,c.jsx)(d.code,{children:"oldEndIdx"}),"\u548c",(0,c.jsx)(d.code,{children:"newStartIdx"}),"\u3001",(0,c.jsx)(d.code,{children:"oldEndIdx"}),"\u548c",(0,c.jsx)(d.code,{children:"newEndIdx"}),"\uff0c\u53d1\u73b0",(0,c.jsx)(d.code,{children:"newStartIdx"}),"\u4e0e",(0,c.jsx)(d.code,{children:"oldEndIdx"}),"\u76f8\u540c\uff0c\u5c06",(0,c.jsx)(d.code,{children:"DOM Node"}),"\u4e2d\u7684",(0,c.jsx)(d.code,{children:"f"}),"\u8fdb\u884c\u79fb\u52a8\u8c03\u6574\u5230",(0,c.jsx)(d.code,{children:"DOM Node"}),"\u4e2d\u7684",(0,c.jsx)(d.code,{children:"a(oldStartIdx)"}),"\u4e4b\u524d\uff0c\u6b64\u65f6",(0,c.jsx)(d.code,{children:"newStartIdx"}),"\u4e0e",(0,c.jsx)(d.code,{children:"oldEndIdx"}),"\u6307\u9488\u5411\u4e2d\u95f4\u9760\u62e2\uff0c\u5373",(0,c.jsx)(d.code,{children:"++newStartIdx"}),"\u4e0e",(0,c.jsx)(d.code,{children:"--oldEndIdx"}),"\u3002"]}),"\n",(0,c.jsx)(d.pre,{children:(0,c.jsx)(d.code,{children:"old VNode: a(oldStartIdx) undefined c d e(oldEndIdx) f\r\nnew VNode: b f g(newStartIdx)(newEndIdx)\r\nDOM Node:  b f a c d e\n"})}),"\n",(0,c.jsxs)(d.p,{children:["\u5faa\u73af\u7ee7\u7eed\uff0c\u6b64\u65f6\u5bf9\u6bd4",(0,c.jsx)(d.code,{children:"oldStartIdx"}),"\u548c",(0,c.jsx)(d.code,{children:"newStartIdx"}),"\u3001",(0,c.jsx)(d.code,{children:"oldStartIdx"}),"\u548c",(0,c.jsx)(d.code,{children:"newEndIdx"}),"\u3001",(0,c.jsx)(d.code,{children:"oldEndIdx"}),"\u548c",(0,c.jsx)(d.code,{children:"newStartIdx"}),"\u3001",(0,c.jsx)(d.code,{children:"oldEndIdx"}),"\u548c",(0,c.jsx)(d.code,{children:"newEndIdx"}),"\uff0c\u5e76\u6ca1\u6709\u76f8\u540c\u7684\u60c5\u51b5\uff0c\u53d6",(0,c.jsx)(d.code,{children:"newStartIdx"}),"\u7684",(0,c.jsx)(d.code,{children:"key"}),"\u503c\uff0c\u5230",(0,c.jsx)(d.code,{children:"old VNode"}),"\u53bb\u627e\uff0c\u6ca1\u6709\u53d1\u73b0\u76f8\u540c\u7684\u503c\uff0c\u5219\u76f4\u63a5\u521b\u5efa\u4e00\u4e2a\u8282\u70b9\u63d2\u5165\u5230",(0,c.jsx)(d.code,{children:"DOM Node"}),"\u4e2d\u7684",(0,c.jsx)(d.code,{children:"a(oldStartIdx)"}),"\u4e4b\u524d\uff0c",(0,c.jsx)(d.code,{children:"newStartIdx"}),"\u6307\u9488\u5411\u4e2d\u95f4\u9760\u62e2\uff0c\u5373",(0,c.jsx)(d.code,{children:"++newStartIdx"}),"\u3002"]}),"\n",(0,c.jsx)(d.pre,{children:(0,c.jsx)(d.code,{children:"old VNode: a(oldStartIdx) undefined c d e(oldEndIdx) f\r\nnew VNode: b f g(newEndIdx) (newStartIdx)\r\nDOM Node:  b f g a c d e\n"})}),"\n",(0,c.jsx)(d.p,{children:"\u6b64\u65f6\u5faa\u73af\u7ed3\u675f\uff0c\u6709\u4e24\u4e2a\u9009\u62e9\uff1a"}),"\n",(0,c.jsxs)(d.ul,{children:["\n",(0,c.jsxs)(d.li,{children:["\u5982\u679c",(0,c.jsx)(d.code,{children:"oldStartldx > oldEndldx"}),"\uff0c\u8bf4\u660e\u8001\u8282\u70b9\u904d\u5386\u5b8c\u6210\u4e86\uff0c\u65b0\u7684\u8282\u70b9\u6bd4\u8f83\u591a\uff0c\u6240\u4ee5\u591a\u51fa \u6765\u7684\u8fd9\u4e9b\u65b0\u8282\u70b9\uff0c\u9700\u8981\u521b\u5efa\u51fa\u6765\u5e76\u6dfb\u52a0\u5230\u771f\u5b9e",(0,c.jsx)(d.code,{children:"DOM Node"}),"\u540e\u9762\u3002"]}),"\n",(0,c.jsxs)(d.li,{children:["\u5982\u679c",(0,c.jsx)(d.code,{children:"newStartldx >newEndldx"}),"\uff0c\u8bf4\u660e\u65b0\u8282\u70b9\u904d\u5386\u5b8c\u6210\u4e86\uff0c\u8001\u7684\u8282\u70b9\u6bd4\u8f83\u591a\uff0c\u6240\u4ee5\u591a \u51fa\u6765\u7684\u8fd9\u4e9b\u8001\u8282\u70b9\uff0c\u9700\u8981\u4ece\u771f\u5b9e",(0,c.jsx)(d.code,{children:"DOM Node"}),"\u4e2d\u5220\u9664\u8fd9\u4e9b\u8282\u70b9\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(d.p,{children:["\u6b64\u65f6\u6211\u4eec\u7b26\u5408\u573a\u666f\u4e8c\uff0c\u6240\u4ee5\u9700\u8981\u4ece\u771f\u5b9e",(0,c.jsx)(d.code,{children:"DOM Node"}),"\u4e2d\u5220\u9664",(0,c.jsx)(d.code,{children:"[oldStartldx\uff0coldEndldx]"}),"\u533a\u95f4 \u4e2d\u7684",(0,c.jsx)(d.code,{children:"Node"}),"\u8282\u70b9\uff0c\u6839\u636e\u4e0a\u8ff0\u5185\u5bb9\uff0c\u5373\u9700\u8981\u5220\u9664",(0,c.jsx)(d.code,{children:"a c d e"}),"\u56db\u4e2a\u8282\u70b9\uff0c\u81f3\u6b64",(0,c.jsx)(d.code,{children:"diff"}),"\u5b8c\u6210\u3002"]}),"\n",(0,c.jsx)(d.pre,{children:(0,c.jsx)(d.code,{children:"old VNode: a(oldStartIdx) undefined c d e(oldEndIdx) f\r\nnew VNode: b f g(newEndIdx) (newStartIdx)\r\nDOM Node:  b f g\n"})}),"\n",(0,c.jsxs)(d.p,{children:[(0,c.jsx)(d.code,{children:"diff"}),"\u5b8c\u6210\u4e4b\u540e\u4fbf\u662f\u5c06",(0,c.jsx)(d.code,{children:"new VNode"}),"\u4f5c\u4e3a",(0,c.jsx)(d.code,{children:"old VNode"}),"\u4ee5\u4fbf\u4e0b\u6b21",(0,c.jsx)(d.code,{children:"diff"}),"\u65f6\u4f7f\u7528\uff0c\u6b64\u5916\u5173\u4e8e\u7ec4\u4ef6\u7684",(0,c.jsx)(d.code,{children:"diff"}),"\uff0c\u7ec4\u4ef6\u7ea7\u522b\u7684",(0,c.jsx)(d.code,{children:"diff"}),"\u7b97\u6cd5\u6bd4\u8f83\u7b80\u5355\uff0c\u8282\u70b9\u4e0d\u76f8\u540c\u5c31\u8fdb\u884c\u521b\u5efa\u548c\u66ff\u6362\uff0c\u8282\u70b9\u76f8\u540c\u7684\u8bdd\u5c31\u4f1a\u5bf9\u5176\u5b50\u8282\u70b9\u8fdb\u884c\u66f4\u65b0\uff0c\u6700\u540e\u5173\u4e8e\u8c03\u7528",(0,c.jsx)(d.code,{children:"createElm"}),"\u6765\u6839\u636e",(0,c.jsx)(d.code,{children:"VNode"}),"\u521b\u5efa\u771f\u5b9e\u7684",(0,c.jsx)(d.code,{children:"DOM"}),"\u5143\u7d20\uff0c\u5982\u679c\u662f\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u90a3\u4e48 ",(0,c.jsx)(d.code,{children:"createComponent"}),"\u4f1a\u8fd4\u56de",(0,c.jsx)(d.code,{children:"true"}),"\uff0c\u56e0\u6b64\u4e0d\u4f1a\u8fdb\u884c\u63a5\u4e0b\u6765\u7684\u64cd\u4f5c\uff0c\u5982\u679c\u4e0d\u662f\u7ec4\u4ef6\uff0c\u4f1a\u8fdb\u884c\u8282\u70b9\u521b\u5efa\u5de5\u4f5c\uff0c\u5e76\u4f1a\u9012\u5f52\u5bf9\u5b69\u5b50\u521b\u5efa\u8282\u70b9\u3002"]}),"\n",(0,c.jsx)(d.h2,{id:"\u6bcf\u65e5\u4e00\u9898",children:"\u6bcf\u65e5\u4e00\u9898"}),"\n",(0,c.jsx)(d.pre,{children:(0,c.jsx)(d.code,{children:"https://github.com/WindrunnerMax/EveryDay\n"})}),"\n",(0,c.jsx)(d.h2,{id:"\u53c2\u8003",children:"\u53c2\u8003"}),"\n",(0,c.jsx)(d.pre,{children:(0,c.jsx)(d.code,{children:"https://github.com/aooy/blog/issues/2\r\nhttps://www.zhihu.com/question/66851503\r\nhttps://juejin.im/post/6844903607913938951\r\nhttps://juejin.im/post/6844903592483094535\r\nhttps://reactjs.org/docs/reconciliation.html\r\nhttps://www.cnblogs.com/lilicat/p/13448827.html\r\nhttps://www.cnblogs.com/lilicat/p/13448915.html\r\nhttps://github.com/lihongxun945/myblog/issues/33\r\nhttps://www.cnblogs.com/xujiazheng/p/12101764.html\r\nhttps://blog.csdn.net/dongcehao/article/details/106987886\r\nhttps://blog.csdn.net/qq2276031/article/details/106407647\r\nhttps://github.com/Advanced-Frontend/Daily-Interview-Question/issues/151\r\nhttps://leetcode-cn.com/problems/edit-distance/solution/bian-ji-ju-chi-by-leetcode-solution/\n"})})]})}function h(e={}){const{wrapper:d}={...(0,o.R)(),...e.components};return d?(0,c.jsx)(d,{...e,children:(0,c.jsx)(x,{...e})}):x(e)}},8453:(e,d,n)=>{n.d(d,{R:()=>l,x:()=>i});var r=n(6540);const c={},o=r.createContext(c);function l(e){const d=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(d):{...d,...e}}),[d,e])}function i(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:l(e.components),r.createElement(o.Provider,{value:d},e.children)}}}]);