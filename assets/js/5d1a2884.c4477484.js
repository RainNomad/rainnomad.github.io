"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7140],{560:(e,r,o)=>{o.r(r),o.d(r,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>d,metadata:()=>n,toc:()=>t});const n=JSON.parse('{"id":"HTML-\u7b14\u8bb0/Web Worker","title":"Web Worker","description":"JavaScript\u662f\u5355\u7ebf\u7a0b\u8bed\u8a00\uff0c\u5982\u679c\u5728Js\u4e3b\u7ebf\u7a0b\u4e0a\u8fdb\u884c\u6bd4\u8f83\u8017\u65f6\u7684\u64cd\u4f5c\uff0c\u90a3\u4e48\u4e0d\u4ec5\u5f02\u6b65\u7684\u4e8b\u4ef6\u56de\u8c03\u65e0\u6cd5\u6b63\u5e38\u5b8c\u6210\uff0c\u6d4f\u89c8\u5668\u7684\u6e32\u67d3\u7ebf\u7a0b\u4e5f\u5c06\u88ab\u963b\u585e\uff0c\u65e0\u6cd5\u6b63\u5e38\u6e32\u67d3\u9875\u9762\u3002Web Worker\u80fd\u591f\u628aJavaScript\u8ba1\u7b97\u59d4\u6258\u7ed9\u540e\u53f0\u7ebf\u7a0b\uff0c\u7ebf\u7a0b\u53ef\u4ee5\u6267\u884c\u4efb\u52a1\u800c\u4e0d\u5e72\u6270\u7528\u6237\u754c\u9762\u3002","source":"@site/docs/HTML-\u7b14\u8bb0/Web Worker.md","sourceDirName":"HTML-\u7b14\u8bb0","slug":"/HTML-\u7b14\u8bb0/Web Worker","permalink":"/docs/HTML-\u7b14\u8bb0/Web Worker","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/HTML-\u7b14\u8bb0/Web Worker.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Shadow DOM\u7684\u7406\u89e3","permalink":"/docs/HTML-\u7b14\u8bb0/Shadow DOM\u7684\u7406\u89e3"},"next":{"title":"\u524d\u7aef\u6027\u80fd\u4f18\u5316\u65b9\u6848","permalink":"/docs/HTML-\u7b14\u8bb0/\u524d\u7aef\u6027\u80fd\u4f18\u5316\u65b9\u6848"}}');var c=o(4848),s=o(8453);const d={},i="Web Worker",l={},t=[{value:"\u63cf\u8ff0",id:"\u63cf\u8ff0",level:2},{value:"\u4e13\u7528worker",id:"\u4e13\u7528worker",level:2},{value:"\u5171\u4eabworker",id:"\u5171\u4eabworker",level:2},{value:"\u6bcf\u65e5\u4e00\u9898",id:"\u6bcf\u65e5\u4e00\u9898",level:2},{value:"\u53c2\u8003",id:"\u53c2\u8003",level:2}];function a(e){const r={br:"br",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.header,{children:(0,c.jsx)(r.h1,{id:"web-worker",children:"Web Worker"})}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.code,{children:"JavaScript"}),"\u662f\u5355\u7ebf\u7a0b\u8bed\u8a00\uff0c\u5982\u679c\u5728",(0,c.jsx)(r.code,{children:"Js"}),"\u4e3b\u7ebf\u7a0b\u4e0a\u8fdb\u884c\u6bd4\u8f83\u8017\u65f6\u7684\u64cd\u4f5c\uff0c\u90a3\u4e48\u4e0d\u4ec5\u5f02\u6b65\u7684\u4e8b\u4ef6\u56de\u8c03\u65e0\u6cd5\u6b63\u5e38\u5b8c\u6210\uff0c\u6d4f\u89c8\u5668\u7684\u6e32\u67d3\u7ebf\u7a0b\u4e5f\u5c06\u88ab\u963b\u585e\uff0c\u65e0\u6cd5\u6b63\u5e38\u6e32\u67d3\u9875\u9762\u3002",(0,c.jsx)(r.code,{children:"Web Worker"}),"\u80fd\u591f\u628a",(0,c.jsx)(r.code,{children:"JavaScript"}),"\u8ba1\u7b97\u59d4\u6258\u7ed9\u540e\u53f0\u7ebf\u7a0b\uff0c\u7ebf\u7a0b\u53ef\u4ee5\u6267\u884c\u4efb\u52a1\u800c\u4e0d\u5e72\u6270\u7528\u6237\u754c\u9762\u3002"]}),"\n",(0,c.jsx)(r.h2,{id:"\u63cf\u8ff0",children:"\u63cf\u8ff0"}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.code,{children:"worker"}),"\u662f\u4f7f\u7528\u6784\u9020\u51fd\u6570\u521b\u5efa\u7684\u4e00\u4e2a\u5bf9\u8c61\u6765\u8fd0\u884c\u4e00\u4e2a",(0,c.jsx)(r.code,{children:"Js"}),"\u6587\u4ef6\uff0c\u8fd9\u4e2a",(0,c.jsx)(r.code,{children:"Js"}),"\u6587\u4ef6\u4e2d\u5305\u542b\u5c06\u5728",(0,c.jsx)(r.code,{children:"worker"}),"\u7ebf\u7a0b\u4e2d\u8fd0\u884c\u7684\u4ee3\u7801\uff0c",(0,c.jsx)(r.code,{children:"worker"}),"\u8fd0\u884c\u7684\u5168\u5c40\u5bf9\u8c61\u4e0d\u662f\u5f53\u524d",(0,c.jsx)(r.code,{children:"window"}),"\uff0c\u4e13\u7528",(0,c.jsx)(r.code,{children:"worker"}),"\u7ebf\u7a0b\u8fd0\u884c\u73af\u5883\u7684\u5168\u5c40\u5bf9\u8c61\u4e3a",(0,c.jsx)(r.code,{children:"DedicatedWorkerGlobalScope"}),"\uff0c\u5171\u4eab",(0,c.jsx)(r.code,{children:"worker"}),"\u7ebf\u7a0b\u8fd0\u884c\u73af\u5883\u7684\u5168\u5c40\u5bf9\u8c61\u4e3a",(0,c.jsx)(r.code,{children:"SharedWorkerGlobalScope"}),"\u3002",(0,c.jsx)(r.br,{}),"\n","\u5728",(0,c.jsx)(r.code,{children:"worker"}),"\u53ef\u4ee5\u8fd0\u884c\u4efb\u610f",(0,c.jsx)(r.code,{children:"JavaScript"}),"\u4ee3\u7801\uff0c\u4f46\u4e0d\u80fd\u591f\u76f4\u63a5\u64cd\u4f5c",(0,c.jsx)(r.code,{children:"DOM"}),"\u8282\u70b9\uff0c\u4e5f\u4e0d\u80fd\u4f7f\u7528",(0,c.jsx)(r.code,{children:"window"}),"\u5bf9\u8c61\u7684\u9ed8\u8ba4\u65b9\u6cd5\u548c\u5c5e\u6027\uff0c\u4f46\u662f\u5728",(0,c.jsx)(r.code,{children:"window"}),"\u5bf9\u8c61\u4e0b\u7684\u5f88\u591a\u65b9\u6cd5\u5305\u62ec",(0,c.jsx)(r.code,{children:"WebSockets"}),"\uff0c",(0,c.jsx)(r.code,{children:"IndexedDB"}),"\u7b49\u5728",(0,c.jsx)(r.code,{children:"worker"}),"\u5168\u5c40\u5bf9\u8c61\u4e2d\u90fd\u6709\u5b9e\u73b0\u3002",(0,c.jsx)(r.br,{}),"\n",(0,c.jsx)(r.code,{children:"worker"}),"\u7ebf\u7a0b\u4e0e\u4e3b\u7ebf\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\u662f\u901a\u8fc7",(0,c.jsx)(r.code,{children:"postMessage"}),"\u53d1\u9001\u6d88\u606f\u4ee5\u53ca",(0,c.jsx)(r.code,{children:"onmessage"}),"\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u6765\u63a5\u6536\u6d88\u606f\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u6570\u636e\u5e76\u4e0d\u662f\u88ab\u5171\u4eab\u800c\u662f\u88ab\u590d\u5236\u3002",(0,c.jsx)(r.br,{}),"\n","\u53ea\u8981\u8fd0\u884c\u5728\u540c\u6e90\u7684\u7236\u9875\u9762\u4e2d\uff0c",(0,c.jsx)(r.code,{children:"worker"}),"\u53ef\u4ee5\u4f9d\u6b21\u751f\u6210\u65b0\u7684",(0,c.jsx)(r.code,{children:"worker"}),"\u3002\u6b64\u5916",(0,c.jsx)(r.code,{children:"worker"}),"\u8fd8\u53ef\u4ee5\u4f7f\u7528",(0,c.jsx)(r.code,{children:"XMLHttpRequest"}),"\u8fdb\u884c\u7f51\u7edc",(0,c.jsx)(r.code,{children:"I/O"}),"\uff0c\u4f46\u662f",(0,c.jsx)(r.code,{children:"XMLHttpRequest"}),"\u7684",(0,c.jsx)(r.code,{children:"responseXML"}),"\u548c",(0,c.jsx)(r.code,{children:"channel"}),"\u5c5e\u6027\u603b\u4f1a\u8fd4\u56de",(0,c.jsx)(r.code,{children:"null"}),"\u3002"]}),"\n",(0,c.jsx)(r.h2,{id:"\u4e13\u7528worker",children:"\u4e13\u7528worker"}),"\n",(0,c.jsxs)(r.p,{children:["\u4e13\u7528",(0,c.jsx)(r.code,{children:"worker"}),"\u4ec5\u80fd\u88ab\u751f\u6210\u5b83\u7684\u811a\u672c\u4f7f\u7528\uff0c\u901a\u8fc7\u6784\u9020\u51fd\u6570\u751f\u6210",(0,c.jsx)(r.code,{children:"worker"}),"\uff0c\u7136\u540e\u901a\u8fc7\u6d88\u606f\u4f20\u9012\u673a\u5236\u5c06\u6570\u636e\u4f20\u9012\u5230",(0,c.jsx)(r.code,{children:"worker"}),"\u7ebf\u7a0b\u8ba1\u7b97\u5b8c\u6bd5\u540e\u518d\u5c06\u6570\u636e\u4f20\u56de\u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c\uff0c",(0,c.jsx)(r.code,{children:"worker"}),"\u7ebf\u7a0b\u7684\u5173\u95ed\u53ef\u4ee5\u5728\u4e3b\u7ebf\u7a0b\u4e2d\u5173\u95ed\u4e5f\u53ef\u4ee5\u5728",(0,c.jsx)(r.code,{children:"worker"}),"\u7ebf\u7a0b\u4e2d\u5173\u95ed\u3002"]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-javascript",children:"// \u9700\u8981\u5f00\u542f\u4e00\u4e2aserver\r\nvar worker = new Worker('worker.js'); // \u5b9e\u4f8b\u5316worker\u7ebf\u7a0b \r\nworker.postMessage(1); // \u4f20\u9012\u6d88\u606f\r\nworker.onmessage = function(e){ // \u63a5\u6536\u6d88\u606f\u4e8b\u4ef6\r\n    console.log(e.data); // 2\r\n    // worker.terminate(); // \u5173\u95edworker\u7ebf\u7a0b\r\n}\n"})}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-javascript",children:"// worker.js worker\u7ebf\u7a0b\r\nonmessage = function(e) { // worker\u63a5\u6536\u6d88\u606f\r\n    var v = e.data; \r\n    console.log(v); // 1\r\n    postMessage(v * 2); // \u4e58\u4ee52\u5e76\u4f20\u9012\u6d88\u606f // \u7b80\u5355\u7684\u8ba1\u7b97\r\n    // close(); // \u5173\u95edworker\u7ebf\u7a0b\r\n}\n"})}),"\n",(0,c.jsx)(r.h2,{id:"\u5171\u4eabworker",children:"\u5171\u4eabworker"}),"\n",(0,c.jsxs)(r.p,{children:["\u5171\u4eab",(0,c.jsx)(r.code,{children:"worker"}),"\u53ef\u4ee5\u540c\u65f6\u88ab\u591a\u4e2a\u811a\u672c\u4f7f\u7528\uff0c\u5373\u4f7f\u8fd9\u4e9b\u811a\u672c\u6b63\u5728\u88ab\u4e0d\u540c\u7684",(0,c.jsx)(r.code,{children:"window"}),"\u3001",(0,c.jsx)(r.code,{children:"iframe"}),"\u6216\u8005",(0,c.jsx)(r.code,{children:"worker"}),"\u8bbf\u95ee\uff0c\u4e5f\u5c31\u662f\u8bf4\u53ef\u4ee5\u4f7f\u7528\u5171\u4eab",(0,c.jsx)(r.code,{children:"worker"}),"\u8fdb\u884c\u591a\u4e2a\u6d4f\u89c8\u5668\u7a97\u53e3\u95f4\u901a\u4fe1\uff0c\u5f53\u7136\u5171\u4eab",(0,c.jsx)(r.code,{children:"worker"}),"\u7684\u901a\u4fe1\u5fc5\u987b\u4e3a\u540c\u6e90\uff0c\u4e0d\u80fd\u8de8\u57df\u901a\u4fe1\u3002\u751f\u6210\u5171\u4eab",(0,c.jsx)(r.code,{children:"worker"}),"\u4e0e\u751f\u6210\u4e13\u7528",(0,c.jsx)(r.code,{children:"worker"}),"\u975e\u5e38\u76f8\u4f3c\uff0c\u53ea\u662f\u6784\u9020\u5668\u7684\u540d\u5b57\u4e0d\u540c\uff0c\u4ed6\u4eec\u4e4b\u95f4\u4e00\u4e2a\u5f88\u5927\u7684\u533a\u522b\u5728\u4e8e\uff1a\u5171\u4eab",(0,c.jsx)(r.code,{children:"worker"}),"\u5fc5\u987b\u901a\u8fc7\u4e00\u4e2a\u786e\u5207\u7684\u6253\u5f00\u7684\u7aef\u53e3\u5bf9\u8c61\u4f9b\u811a\u672c\u4e0e",(0,c.jsx)(r.code,{children:"worker"}),"\u901a\u4fe1\uff0c\u5728\u4e13\u7528",(0,c.jsx)(r.code,{children:"worker"}),"\u4e2d\u8fd9\u4e00\u90e8\u5206\u662f\u9690\u5f0f\u8fdb\u884c\u7684\u3002\u5982\u679c\u7236\u7ea7\u7ebf\u7a0b\u548c",(0,c.jsx)(r.code,{children:"worker"}),"\u7ebf\u7a0b\u9700\u8981\u53cc\u5411\u901a\u4fe1\uff0c\u90a3\u4e48\u5b83\u4eec\u90fd\u9700\u8981\u8c03\u7528",(0,c.jsx)(r.code,{children:"start()"}),"\u65b9\u6cd5\uff0c\u5bf9\u4e8e\u6d88\u606f\u7684\u4f20\u9012\u4f9d\u7136\u4f7f\u7528",(0,c.jsx)(r.code,{children:"postMessage"}),"\u4f46\u662f\u5fc5\u987b\u901a\u8fc7\u8c03\u7528\u7aef\u53e3\u4e0a\u7684",(0,c.jsx)(r.code,{children:"postMessage"}),"\u65b9\u6cd5\u6765\u5b9e\u73b0\u6d88\u606f\u901a\u4fe1\u3002"]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-javascript",children:"// \u9700\u8981\u5f00\u542f\u4e00\u4e2aserver\r\n// \u9875\u9762A \u6d4f\u89c8\u5668\u7a97\u53e3\u95f4\u901a\u4fe1\u5b9e\u4f8b\r\nvar worker = new SharedWorker('worker.js');\r\nworker.port.start();\r\nworker.port.postMessage(1);\n"})}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-javascript",children:"// \u9875\u9762B \u6d4f\u89c8\u5668\u7a97\u53e3\u95f4\u901a\u4fe1\u5b9e\u4f8b\r\nvar worker = new SharedWorker('worker.js');\r\nworker.port.start();\r\nworker.port.onmessage = function(event){\r\n    console.log(event.data);\r\n};\n"})}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-javascript",children:"// worker.js worker\u7ebf\u7a0b\r\nvar portArr = [];\r\nonconnect = function(e) {\r\n  var port = e.ports[0];\r\n  if(portArr.indexOf(port) === -1) portArr.push(port);\r\n  port.onmessage = function(e) {\r\n    portArr.forEach( v => {\r\n        v.postMessage(e.data);\r\n    })\r\n  }\r\n}\n"})}),"\n",(0,c.jsx)(r.h2,{id:"\u6bcf\u65e5\u4e00\u9898",children:"\u6bcf\u65e5\u4e00\u9898"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{children:"https://github.com/WindrunnerMax/EveryDay\n"})}),"\n",(0,c.jsx)(r.h2,{id:"\u53c2\u8003",children:"\u53c2\u8003"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{children:"https://developer.mozilla.org/zh-CN/docs/Web/API/Worker\r\nhttps://developer.mozilla.org/zh-CN/docs/Web/API/SharedWorker\r\nhttps://developer.mozilla.org/zh-CN/docs/Web/API/Web_Workers_API/Using_web_workers\n"})})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,c.jsx)(r,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},8453:(e,r,o)=>{o.d(r,{R:()=>d,x:()=>i});var n=o(6540);const c={},s=n.createContext(c);function d(e){const r=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:d(e.components),n.createElement(s.Provider,{value:r},e.children)}}}]);