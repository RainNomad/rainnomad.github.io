"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4639],{8453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>a});var t=r(6540);const i={},s=t.createContext(i);function d(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),t.createElement(s.Provider,{value:n},e.children)}},8880:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>d,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"VUE-\u7b14\u8bb0/Vue\u4e8b\u4ef6\u7ed1\u5b9a\u539f\u7406","title":"Vue\u4e8b\u4ef6\u7ed1\u5b9a\u539f\u7406","description":"Vue\u4e2d\u901a\u8fc7v-on\u6216\u5176\u8bed\u6cd5\u7cd6@\u6307\u4ee4\u6765\u7ed9\u5143\u7d20\u7ed1\u5b9a\u4e8b\u4ef6\u5e76\u4e14\u63d0\u4f9b\u4e86\u4e8b\u4ef6\u4fee\u9970\u7b26\uff0c\u57fa\u672c\u6d41\u7a0b\u662f\u8fdb\u884c\u6a21\u677f\u7f16\u8bd1\u751f\u6210AST\uff0c\u751f\u6210render\u51fd\u6570\u540e\u5e76\u6267\u884c\u5f97\u5230VNode\uff0cVNode\u751f\u6210\u771f\u5b9eDOM\u8282\u70b9\u6216\u8005\u7ec4\u4ef6\u65f6\u5019\u4f7f\u7528addEventListener\u65b9\u6cd5\u8fdb\u884c\u4e8b\u4ef6\u7ed1\u5b9a\u3002","source":"@site/docs/VUE-\u7b14\u8bb0/Vue\u4e8b\u4ef6\u7ed1\u5b9a\u539f\u7406.md","sourceDirName":"VUE-\u7b14\u8bb0","slug":"/VUE-\u7b14\u8bb0/Vue\u4e8b\u4ef6\u7ed1\u5b9a\u539f\u7406","permalink":"/docs/VUE-\u7b14\u8bb0/Vue\u4e8b\u4ef6\u7ed1\u5b9a\u539f\u7406","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/VUE-\u7b14\u8bb0/Vue\u4e8b\u4ef6\u7ed1\u5b9a\u539f\u7406.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Vue\u4e3a\u4f55\u91c7\u7528\u5f02\u6b65\u6e32\u67d3","permalink":"/docs/VUE-\u7b14\u8bb0/Vue\u4e3a\u4f55\u91c7\u7528\u5f02\u6b65\u6e32\u67d3"},"next":{"title":"Vue\u5e38\u7528\u6027\u80fd\u4f18\u5316","permalink":"/docs/VUE-\u7b14\u8bb0/Vue\u5e38\u7528\u6027\u80fd\u4f18\u5316"}}');var i=r(4848),s=r(8453);const d={},a="Vue\u4e8b\u4ef6\u7ed1\u5b9a\u539f\u7406",o={},c=[{value:"\u63cf\u8ff0",id:"\u63cf\u8ff0",level:2},{value:"\u4fee\u9970\u7b26",id:"\u4fee\u9970\u7b26",level:3},{value:"\u666e\u901a\u5143\u7d20",id:"\u666e\u901a\u5143\u7d20",level:3},{value:"\u7ec4\u4ef6\u5143\u7d20",id:"\u7ec4\u4ef6\u5143\u7d20",level:3},{value:"\u5206\u6790",id:"\u5206\u6790",level:2},{value:"\u7f16\u8bd1\u9636\u6bb5",id:"\u7f16\u8bd1\u9636\u6bb5",level:3},{value:"\u4ee3\u7801\u751f\u6210",id:"\u4ee3\u7801\u751f\u6210",level:3},{value:"\u4e8b\u4ef6\u7ed1\u5b9a",id:"\u4e8b\u4ef6\u7ed1\u5b9a",level:3},{value:"\u6bcf\u65e5\u4e00\u9898",id:"\u6bcf\u65e5\u4e00\u9898",level:2},{value:"\u53c2\u8003",id:"\u53c2\u8003",level:2}];function l(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"vue\u4e8b\u4ef6\u7ed1\u5b9a\u539f\u7406",children:"Vue\u4e8b\u4ef6\u7ed1\u5b9a\u539f\u7406"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Vue"}),"\u4e2d\u901a\u8fc7",(0,i.jsx)(n.code,{children:"v-on"}),"\u6216\u5176\u8bed\u6cd5\u7cd6",(0,i.jsx)(n.code,{children:"@"}),"\u6307\u4ee4\u6765\u7ed9\u5143\u7d20\u7ed1\u5b9a\u4e8b\u4ef6\u5e76\u4e14\u63d0\u4f9b\u4e86\u4e8b\u4ef6\u4fee\u9970\u7b26\uff0c\u57fa\u672c\u6d41\u7a0b\u662f\u8fdb\u884c\u6a21\u677f\u7f16\u8bd1\u751f\u6210",(0,i.jsx)(n.code,{children:"AST"}),"\uff0c\u751f\u6210",(0,i.jsx)(n.code,{children:"render"}),"\u51fd\u6570\u540e\u5e76\u6267\u884c\u5f97\u5230",(0,i.jsx)(n.code,{children:"VNode"}),"\uff0c",(0,i.jsx)(n.code,{children:"VNode"}),"\u751f\u6210\u771f\u5b9e",(0,i.jsx)(n.code,{children:"DOM"}),"\u8282\u70b9\u6216\u8005\u7ec4\u4ef6\u65f6\u5019\u4f7f\u7528",(0,i.jsx)(n.code,{children:"addEventListener"}),"\u65b9\u6cd5\u8fdb\u884c\u4e8b\u4ef6\u7ed1\u5b9a\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u63cf\u8ff0",children:"\u63cf\u8ff0"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"v-on"}),"\u4e0e",(0,i.jsx)(n.code,{children:"@"}),"\u7528\u4e8e\u7ed1\u5b9a\u4e8b\u4ef6\u76d1\u542c\u5668\uff0c\u4e8b\u4ef6\u7c7b\u578b\u7531\u53c2\u6570\u6307\u5b9a\uff0c\u8868\u8fbe\u5f0f\u53ef\u4ee5\u662f\u4e00\u4e2a\u65b9\u6cd5\u7684\u540d\u5b57\u6216\u4e00\u4e2a\u5185\u8054\u8bed\u53e5\uff0c\u5982\u679c\u6ca1\u6709\u4fee\u9970\u7b26\u4e5f\u53ef\u4ee5\u7701\u7565\uff0c\u7528\u5728\u666e\u901a\u5143\u7d20\u4e0a\u65f6\uff0c\u53ea\u80fd\u76d1\u542c\u539f\u751f",(0,i.jsx)(n.code,{children:"DOM"}),"\u4e8b\u4ef6\uff0c\u7528\u5728\u81ea\u5b9a\u4e49\u5143\u7d20\u7ec4\u4ef6\u4e0a\u65f6\uff0c\u4e5f\u53ef\u4ee5\u76d1\u542c\u5b50\u7ec4\u4ef6\u89e6\u53d1\u7684\u81ea\u5b9a\u4e49\u4e8b\u4ef6\uff0c\u5728\u76d1\u542c\u539f\u751f",(0,i.jsx)(n.code,{children:"DOM"}),"\u4e8b\u4ef6\u65f6\uff0c\u65b9\u6cd5\u4ee5\u4e8b\u4ef6\u4e3a\u552f\u4e00\u7684\u53c2\u6570\uff0c\u5982\u679c\u4f7f\u7528\u5185\u8054\u8bed\u53e5\uff0c\u8bed\u53e5\u53ef\u4ee5\u8bbf\u95ee\u4e00\u4e2a",(0,i.jsx)(n.code,{children:"$event property\uff1av-on:click=\"handle('param', $event)\""}),"\uff0c\u81ea",(0,i.jsx)(n.code,{children:"2.4.0"}),"\u5f00\u59cb",(0,i.jsx)(n.code,{children:"v-on"}),"\u540c\u6837\u652f\u6301\u4e0d\u5e26\u53c2\u6570\u7ed1\u5b9a\u4e00\u4e2a\u4e8b\u4ef6\u6216\u76d1\u542c\u5668\u952e\u503c\u5bf9\u7684\u5bf9\u8c61\uff0c\u6ce8\u610f\u5f53\u4f7f\u7528\u5bf9\u8c61\u8bed\u6cd5\u65f6\uff0c\u662f\u4e0d\u652f\u6301\u4efb\u4f55\u4fee\u9970\u5668\u7684\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"\u4fee\u9970\u7b26",children:"\u4fee\u9970\u7b26"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".stop"}),": \u8c03\u7528",(0,i.jsx)(n.code,{children:"event.stopPropagation()"}),"\uff0c\u5373\u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".prevent"}),": \u8c03\u7528",(0,i.jsx)(n.code,{children:"event.preventDefault()"}),"\uff0c\u5373\u963b\u6b62\u9ed8\u8ba4\u4e8b\u4ef6\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".capture"}),": \u6dfb\u52a0\u4e8b\u4ef6\u4fa6\u542c\u5668\u65f6\u4f7f\u7528",(0,i.jsx)(n.code,{children:"capture"}),"\u6a21\u5f0f\uff0c\u5373\u4f7f\u7528\u4e8b\u4ef6\u6355\u83b7\u6a21\u5f0f\u5904\u7406\u4e8b\u4ef6\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".self"}),": \u53ea\u5f53\u4e8b\u4ef6\u662f\u4ece\u4fa6\u542c\u5668\u7ed1\u5b9a\u7684\u5143\u7d20\u672c\u8eab\u89e6\u53d1\u65f6\u624d\u89e6\u53d1\u56de\u8c03\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".{keyCode | keyAlias}"}),": \u53ea\u5f53\u4e8b\u4ef6\u662f\u4ece\u7279\u5b9a\u952e\u89e6\u53d1\u65f6\u624d\u89e6\u53d1\u56de\u8c03\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".native"}),": \u76d1\u542c\u7ec4\u4ef6\u6839\u5143\u7d20\u7684\u539f\u751f\u4e8b\u4ef6\uff0c\u5373\u6ce8\u518c\u7ec4\u4ef6\u6839\u5143\u7d20\u7684\u539f\u751f\u4e8b\u4ef6\u800c\u4e0d\u662f\u7ec4\u4ef6\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".once"}),": \u53ea\u89e6\u53d1\u4e00\u6b21\u56de\u8c03\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".left(2.2.0)"}),": \u53ea\u5f53\u70b9\u51fb\u9f20\u6807\u5de6\u952e\u65f6\u89e6\u53d1\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".right(2.2.0)"}),": \u53ea\u5f53\u70b9\u51fb\u9f20\u6807\u53f3\u952e\u65f6\u89e6\u53d1\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".middle(2.2.0)"}),": \u53ea\u5f53\u70b9\u51fb\u9f20\u6807\u4e2d\u952e\u65f6\u89e6\u53d1\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".passive(2.3.0)"}),": \u4ee5",(0,i.jsx)(n.code,{children:"{ passive: true }"}),"\u6a21\u5f0f\u6dfb\u52a0\u4fa6\u542c\u5668\uff0c\u8868\u793a",(0,i.jsx)(n.code,{children:"listener"}),"\u6c38\u8fdc\u4e0d\u4f1a\u8c03\u7528",(0,i.jsx)(n.code,{children:"preventDefault()"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u666e\u901a\u5143\u7d20",children:"\u666e\u901a\u5143\u7d20"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'\x3c!-- \u65b9\u6cd5\u5904\u7406\u5668 --\x3e\r\n<button v-on:click="doThis"></button>\r\n\r\n\x3c!-- \u52a8\u6001\u4e8b\u4ef6 (2.6.0+) --\x3e\r\n<button v-on:[event]="doThis"></button>\r\n\r\n\x3c!-- \u5185\u8054\u8bed\u53e5 --\x3e\r\n<button v-on:click="doThat(\'param\', $event)"></button>\r\n\r\n\x3c!-- \u7f29\u5199 --\x3e\r\n<button @click="doThis"></button>\r\n\r\n\x3c!-- \u52a8\u6001\u4e8b\u4ef6\u7f29\u5199 (2.6.0+) --\x3e\r\n<button @[event]="doThis"></button>\r\n\r\n\x3c!-- \u505c\u6b62\u5192\u6ce1 --\x3e\r\n<button @click.stop="doThis"></button>\r\n\r\n\x3c!-- \u963b\u6b62\u9ed8\u8ba4\u884c\u4e3a --\x3e\r\n<button @click.prevent="doThis"></button>\r\n\r\n\x3c!-- \u963b\u6b62\u9ed8\u8ba4\u884c\u4e3a\uff0c\u6ca1\u6709\u8868\u8fbe\u5f0f --\x3e\r\n<form @submit.prevent></form>\r\n\r\n\x3c!--  \u4e32\u8054\u4fee\u9970\u7b26 --\x3e\r\n<button @click.stop.prevent="doThis"></button>\r\n\r\n\x3c!-- \u952e\u4fee\u9970\u7b26\uff0c\u952e\u522b\u540d --\x3e\r\n<input @keyup.enter="onEnter">\r\n\r\n\x3c!-- \u952e\u4fee\u9970\u7b26\uff0c\u952e\u4ee3\u7801 --\x3e\r\n<input @keyup.13="onEnter">\r\n\r\n\x3c!-- \u70b9\u51fb\u56de\u8c03\u53ea\u4f1a\u89e6\u53d1\u4e00\u6b21 --\x3e\r\n<button v-on:click.once="doThis"></button>\r\n\r\n\x3c!-- \u5bf9\u8c61\u8bed\u6cd5 (2.4.0+) --\x3e\r\n<button v-on="{ mousedown: doThis, mouseup: doThat }"></button>\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u7ec4\u4ef6\u5143\u7d20",children:"\u7ec4\u4ef6\u5143\u7d20"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'\x3c!-- \u81ea\u5b9a\u4e49\u4e8b\u4ef6 --\x3e\r\n<my-component @my-event="handleThis"></my-component>\r\n\r\n\x3c!-- \u5185\u8054\u8bed\u53e5 --\x3e\r\n<my-component @my-event="handleThis(\'param\', $event)"></my-component>\r\n\r\n\x3c!-- \u7ec4\u4ef6\u4e2d\u7684\u539f\u751f\u4e8b\u4ef6 --\x3e\r\n<my-component @click.native="onClick"></my-component>\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u5206\u6790",children:"\u5206\u6790"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Vue"}),"\u6e90\u7801\u7684\u5b9e\u73b0\u6bd4\u8f83\u590d\u6742\uff0c\u4f1a\u5904\u7406\u5404\u79cd\u517c\u5bb9\u95ee\u9898\u4e0e\u5f02\u5e38\u4ee5\u53ca\u5404\u79cd\u6761\u4ef6\u5206\u652f\uff0c\u6587\u7ae0\u5206\u6790\u6bd4\u8f83\u6838\u5fc3\u7684\u4ee3\u7801\u90e8\u5206\uff0c\u7cbe\u7b80\u8fc7\u540e\u7684\u7248\u672c\uff0c\u91cd\u8981\u90e8\u5206\u505a\u51fa\u6ce8\u91ca\uff0c",(0,i.jsx)(n.code,{children:"commit id"}),"\u4e3a",(0,i.jsx)(n.code,{children:"ef56410"}),"\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"\u7f16\u8bd1\u9636\u6bb5",children:"\u7f16\u8bd1\u9636\u6bb5"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Vue"}),"\u5728\u6302\u8f7d\u5b9e\u4f8b\u524d\uff0c\u6709\u76f8\u5f53\u591a\u7684\u5de5\u4f5c\u662f\u8fdb\u884c\u6a21\u677f\u7684\u7f16\u8bd1\uff0c\u5c06",(0,i.jsx)(n.code,{children:"template"}),"\u6a21\u677f\u8fdb\u884c\u7f16\u8bd1\uff0c\u89e3\u6790\u6210",(0,i.jsx)(n.code,{children:"AST"}),"\u6811\uff0c\u518d\u8f6c\u6362\u6210",(0,i.jsx)(n.code,{children:"render"}),"\u51fd\u6570\uff0c\u800c\u5728\u7f16\u8bd1\u9636\u6bb5\uff0c\u5c31\u662f\u5bf9\u4e8b\u4ef6\u7684\u6307\u4ee4\u505a\u6536\u96c6\u5904\u7406\u3002",(0,i.jsx)(n.br,{}),"\n","\u5728",(0,i.jsx)(n.code,{children:"template"}),"\u6a21\u677f\u4e2d\uff0c\u5b9a\u4e49\u4e8b\u4ef6\u7684\u90e8\u5206\u662f\u5c5e\u4e8e",(0,i.jsx)(n.code,{children:"XML"}),"\u7684",(0,i.jsx)(n.code,{children:"Attribute"}),"\uff0c\u6240\u4ee5\u6536\u96c6\u6307\u4ee4\u65f6\u9700\u8981\u5339\u914d",(0,i.jsx)(n.code,{children:"Attributes"}),"\u4ee5\u786e\u5b9a\u54ea\u4e2a",(0,i.jsx)(n.code,{children:"Attribute"}),"\u662f\u5c5e\u4e8e\u4e8b\u4ef6\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// dev/src/compiler/parser/index.js line 23\r\nexport const onRE = /^@|^v-on:/\r\nexport const dirRE = process.env.VBIND_PROP_SHORTHAND\r\n  ? /^v-|^@|^:|^\\.|^#/\r\n  : /^v-|^@|^:|^#/\r\n// ...\r\nconst dynamicArgRE = /^\\[.*\\]$/\r\n// ...\r\nexport const bindRE = /^:|^\\.|^v-bind:/\r\n  \r\n// dev/src/compiler/parser/index.js line 757\r\nfunction processAttrs (el) {\r\n  const list = el.attrsList\r\n  let i, l, name, rawName, value, modifiers, syncGen, isDynamic\r\n  for (i = 0, l = list.length; i < l; i++) {\r\n    name = rawName = list[i].name\r\n    value = list[i].value\r\n    if (dirRE.test(name)) { // \u5339\u914d\u6307\u4ee4\u5c5e\u6027\r\n      // mark element as dynamic\r\n      el.hasBindings = true\r\n      // modifiers\r\n      modifiers = parseModifiers(name.replace(dirRE, '')) // \u5c06\u4fee\u9970\u7b26\u89e3\u6790\r\n      // support .foo shorthand syntax for the .prop modifier\r\n      if (process.env.VBIND_PROP_SHORTHAND && propBindRE.test(name)) {\r\n        (modifiers || (modifiers = {})).prop = true\r\n        name = `.` + name.slice(1).replace(modifierRE, '')\r\n      } else if (modifiers) {\r\n        name = name.replace(modifierRE, '')\r\n      }\r\n      if (bindRE.test(name)) { // v-bind // \u5904\u7406v-bind\u7684\u60c5\u51b5\r\n        // ...\r\n      } else if (onRE.test(name)) { // v-on // \u5904\u7406\u4e8b\u4ef6\u7ed1\u5b9a\r\n        name = name.replace(onRE, '') // \u5c06\u4e8b\u4ef6\u540d\u5339\u914d\r\n        isDynamic = dynamicArgRE.test(name) // \u52a8\u6001\u4e8b\u4ef6\u7ed1\u5b9a\r\n        if (isDynamic) { // \u5982\u679c\u662f\u52a8\u6001\u4e8b\u4ef6\r\n          name = name.slice(1, -1) // \u53bb\u6389\u4e24\u7aef\u7684 []\r\n        }\r\n        addHandler(el, name, value, modifiers, false, warn, list[i], isDynamic) // \u5904\u7406\u4e8b\u4ef6\u6536\u96c6\r\n      } else { // normal directives // \u5904\u7406\u5176\u4ed6\u6307\u4ee4\r\n        // ...\r\n      }\r\n    } else {\r\n      // literal attribute // \u5904\u7406\u6587\u5b57\u5c5e\u6027\r\n      // ...\r\n    }\r\n  }\r\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u901a\u8fc7",(0,i.jsx)(n.code,{children:"addHandler"}),"\u65b9\u6cd5\uff0c\u4e3a",(0,i.jsx)(n.code,{children:"AST"}),"\u6811\u6dfb\u52a0\u4e8b\u4ef6\u76f8\u5173\u7684\u5c5e\u6027\u4ee5\u53ca\u5bf9\u4e8b\u4ef6\u4fee\u9970\u7b26\u8fdb\u884c\u5904\u7406\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// dev/src/compiler/helpers.js line 69\r\nexport function addHandler (\r\n  el: ASTElement,\r\n  name: string,\r\n  value: string,\r\n  modifiers: ?ASTModifiers,\r\n  important?: boolean,\r\n  warn?: ?Function,\r\n  range?: Range,\r\n  dynamic?: boolean\r\n) {\r\n  modifiers = modifiers || emptyObject\r\n  // passive \u548c prevent \u4e0d\u80fd\u540c\u65f6\u4f7f\u7528\uff0c\u5177\u4f53\u662f\u7531passive\u6a21\u5f0f\u7684\u6027\u8d28\u51b3\u5b9a\u7684\r\n  // \u8be6\u7ec6\u53ef\u4ee5\u53c2\u9605 https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener\r\n  // warn prevent and passive modifier\r\n  /* istanbul ignore if */\r\n  if (\r\n    process.env.NODE_ENV !== 'production' && warn &&\r\n    modifiers.prevent && modifiers.passive\r\n  ) {\r\n    warn(\r\n      'passive and prevent can\\'t be used together. ' +\r\n      'Passive handler can\\'t prevent default event.',\r\n      range\r\n    )\r\n  }\r\n  // \u6807\u51c6\u5316click.right\u548cclick.middle\uff0c\u56e0\u4e3a\u5b83\u4eec\u5b9e\u9645\u4e0a\u4e0d\u4f1a\u89e6\u53d1\u3002\r\n  // \u4ece\u6280\u672f\u4e0a\u8bb2\uff0c\u8fd9\u662f\u7279\u5b9a\u4e8e\u6d4f\u89c8\u5668\u7684\uff0c\u4f46\u662f\u81f3\u5c11\u76ee\u524d\u6765\u8bf4\uff0c\u6d4f\u89c8\u5668\u662f\u552f\u4e00\u5177\u6709\u53f3\u952e/\u4e2d\u95f4\u70b9\u51fb\u7684\u76ee\u6807\u73af\u5883\u3002\r\n  // normalize click.right and click.middle since they don't actually fire\r\n  // this is technically browser-specific, but at least for now browsers are\r\n  // the only target envs that have right/middle clicks.\r\n  if (modifiers.right) { // \u5c06\u9f20\u6807\u53f3\u952e\u70b9\u51fb\u6807\u51c6\u5316 \u53f3\u952e\u70b9\u51fb\u9ed8\u8ba4\u7684\u662f contextmenu \u4e8b\u4ef6\r\n    if (dynamic) { // \u5982\u679c\u662f\u52a8\u6001\u4e8b\u4ef6\r\n      name = `(${name})==='click'?'contextmenu':(${name})` // \u52a8\u6001\u786e\u5b9a\u4e8b\u4ef6\u540d\r\n    } else if (name === 'click') { // \u5982\u679c\u4e0d\u662f\u52a8\u6001\u4e8b\u4ef6\u4e14\u662f\u9f20\u6807\u53f3\u51fb\r\n      name = 'contextmenu' // \u5219\u76f4\u63a5\u66ff\u6362\u4e3acontextmenu\u4e8b\u4ef6\r\n      delete modifiers.right // \u5220\u9664modifiers\u7684right\u5c5e\u6027\r\n    }\r\n  } else if (modifiers.middle) { // \u540c\u6837\u6807\u51c6\u5316\u5904\u7406\u9f20\u6807\u4e2d\u952e\u70b9\u51fb\u7684\u4e8b\u4ef6\r\n    if (dynamic) { // \u5982\u679c\u662f\u52a8\u6001\u4e8b\u4ef6\r\n      name = `(${name})==='click'?'mouseup':(${name})` // \u52a8\u6001\u786e\u5b9a\u4e8b\u4ef6\u540d\r\n    } else if (name === 'click') { // \u5982\u679c\u4e0d\u662f\u52a8\u6001\u4e8b\u4ef6\u4e14\u662f\u9f20\u6807\u4e2d\u952e\u70b9\u51fb\r\n      name = 'mouseup' // \u5904\u7406\u4e3amouseup\u4e8b\u4ef6\r\n    }\r\n  }\r\n  // \u4e0b\u9762\u662f\u5bf9\u6355\u83b7\u3001\u4e00\u6b21\u89e6\u53d1\u3001passive\u6a21\u5f0f\u7684modifiers\u5904\u7406\uff0c\u4e3b\u8981\u662f\u4e3a\u4e8b\u4ef6\u6dfb\u52a0 !\u3001~\u3001& \u6807\u8bb0\r\n  // \u8fd9\u4e00\u90e8\u5206\u6807\u8bb0\u53ef\u4ee5\u5728Vue\u5b98\u65b9\u6587\u6863\u4e2d\u67e5\u9605 \r\n  // https://cn.vuejs.org/v2/guide/render-function.html#%E4%BA%8B%E4%BB%B6-amp-%E6%8C%89%E9%94%AE%E4%BF%AE%E9%A5%B0%E7%AC%A6\r\n  // check capture modifier\r\n  if (modifiers.capture) {\r\n    delete modifiers.capture\r\n    name = prependModifierMarker('!', name, dynamic)\r\n  }\r\n  if (modifiers.once) {\r\n    delete modifiers.once\r\n    name = prependModifierMarker('~', name, dynamic)\r\n  }\r\n  /* istanbul ignore if */\r\n  if (modifiers.passive) {\r\n    delete modifiers.passive\r\n    name = prependModifierMarker('&', name, dynamic)\r\n  }\r\n  \r\n  // events \u7528\u6765\u8bb0\u5f55\u7ed1\u5b9a\u7684\u4e8b\u4ef6\r\n  let events\r\n  if (modifiers.native) { // \u5982\u679c\u662f\u8981\u89e6\u53d1\u6839\u5143\u7d20\u539f\u751f\u4e8b\u4ef6\u5219\u76f4\u63a5\u53d6\u5f97nativeEvents\r\n    delete modifiers.native\r\n    events = el.nativeEvents || (el.nativeEvents = {})\r\n  } else { // \u5426\u5219\u53d6\u5f97events\r\n    events = el.events || (el.events = {})\r\n  }\r\n    \r\n  // \u5c06\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u4f5c\u4e3ahandler\r\n  const newHandler: any = rangeSetItem({ value: value.trim(), dynamic }, range)\r\n  if (modifiers !== emptyObject) {\r\n    newHandler.modifiers = modifiers\r\n  }\r\n\r\n // \u7ed1\u5b9a\u7684\u4e8b\u4ef6\u53ef\u4ee5\u591a\u4e2a\uff0c\u56de\u8c03\u4e5f\u53ef\u4ee5\u591a\u4e2a\uff0c\u6700\u7ec8\u4f1a\u5408\u5e76\u5230\u6570\u7ec4\u4e2d\r\n  const handlers = events[name]\r\n  /* istanbul ignore if */\r\n  if (Array.isArray(handlers)) {\r\n    important ? handlers.unshift(newHandler) : handlers.push(newHandler)\r\n  } else if (handlers) {\r\n    events[name] = important ? [newHandler, handlers] : [handlers, newHandler]\r\n  } else {\r\n    events[name] = newHandler\r\n  }\r\n\r\n  el.plain = false\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u4ee3\u7801\u751f\u6210",children:"\u4ee3\u7801\u751f\u6210"}),"\n",(0,i.jsxs)(n.p,{children:["\u63a5\u4e0b\u6765\u9700\u8981\u5c06",(0,i.jsx)(n.code,{children:"AST"}),"\u8bed\u6cd5\u6811\u8f6c",(0,i.jsx)(n.code,{children:"render"}),"\u51fd\u6570\uff0c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u4f1a\u52a0\u5165\u5bf9\u4e8b\u4ef6\u7684\u5904\u7406\uff0c\u9996\u5148\u6a21\u5757\u5bfc\u51fa\u4e86",(0,i.jsx)(n.code,{children:"generate"}),"\u51fd\u6570\uff0c",(0,i.jsx)(n.code,{children:"generate"}),"\u51fd\u6570\u5373\u4f1a\u8fd4\u56de",(0,i.jsx)(n.code,{children:"render"}),"\u5b57\u7b26\u4e32\uff0c\u5728\u8fd9\u4e4b\u524d\u4f1a\u8c03\u7528",(0,i.jsx)(n.code,{children:"genElement"}),"\u51fd\u6570\uff0c\u800c\u5728\u4e0a\u8ff0",(0,i.jsx)(n.code,{children:"addHandler"}),"\u65b9\u6cd5\u5904\u7406\u7684\u6700\u540e\u6267\u884c\u4e86",(0,i.jsx)(n.code,{children:"el.plain = false"}),"\uff0c\u8fd9\u6837\u5728",(0,i.jsx)(n.code,{children:"genElement"}),"\u51fd\u6570\u4e2d\u4f1a\u8c03\u7528",(0,i.jsx)(n.code,{children:"genData"}),"\u51fd\u6570\uff0c\u800c\u5728",(0,i.jsx)(n.code,{children:"genData"}),"\u51fd\u6570\u4e2d\u5373\u4f1a\u8c03\u7528",(0,i.jsx)(n.code,{children:"genHandlers"}),"\u51fd\u6570\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// dev/src/compiler/codegen/index.js line 42\r\nexport function generate (\r\n  ast: ASTElement | void,\r\n  options: CompilerOptions\r\n): CodegenResult {\r\n  const state = new CodegenState(options)\r\n  const code = ast ? genElement(ast, state) : '_c(\"div\")'\r\n  return {\r\n    render: `with(this){return ${code}}`, // \u5373render\u5b57\u7b26\u4e32\r\n    staticRenderFns: state.staticRenderFns\r\n  }\r\n}\r\n\r\n// dev/src/compiler/codegen/index.js line 55\r\nexport function genElement (el: ASTElement, state: CodegenState): string {\r\n    // ...\r\n    let code\r\n    if (el.component) {\r\n      code = genComponent(el.component, el, state)\r\n    } else {\r\n      let data\r\n      if (!el.plain || (el.pre && state.maybeComponent(el))) {\r\n        data = genData(el, state)\r\n      }\r\n\r\n      const children = el.inlineTemplate ? null : genChildren(el, state, true)\r\n      code = `_c('${el.tag}'${\r\n        data ? `,${data}` : '' // data\r\n      }${\r\n        children ? `,${children}` : '' // children\r\n      })`\r\n    }\r\n    // ...\r\n}\r\n\r\n// dev/src/compiler/codegen/index.js line 219\r\nexport function genData (el: ASTElement, state: CodegenState): string {\r\n  let data = '{'\r\n  // ...\r\n  // event handlers\r\n  if (el.events) {\r\n    data += `${genHandlers(el.events, false)},`\r\n  }\r\n  if (el.nativeEvents) {\r\n    data += `${genHandlers(el.nativeEvents, true)},`\r\n  }\r\n  // ...\r\n  data = data.replace(/,$/, '') + '}'\r\n  // ...\r\n  return data\r\n}\r\n\r\n// dev/src/compiler/to-function.js line 12 \r\nfunction createFunction (code, errors) {\r\n  try {\r\n    return new Function(code) // \u5c06render\u5b57\u7b26\u4e32\u8f6c\u4e3arender\u51fd\u6570\r\n  } catch (err) {\r\n    errors.push({ err, code })\r\n    return noop\r\n  }\r\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u53ef\u4ee5\u770b\u5230\u65e0\u8bba\u662f\u5904\u7406\u666e\u901a\u5143\u7d20\u4e8b\u4ef6\u8fd8\u662f\u7ec4\u4ef6\u6839\u5143\u7d20\u539f\u751f\u4e8b\u4ef6\u90fd\u4f1a\u8c03\u7528",(0,i.jsx)(n.code,{children:"genHandlers"}),"\u51fd\u6570\uff0c",(0,i.jsx)(n.code,{children:"genHandlers"}),"\u51fd\u6570\u5373\u4f1a\u904d\u5386\u89e3\u6790\u597d\u7684",(0,i.jsx)(n.code,{children:"AST"}),"\u6811\u4e2d\u4e8b\u4ef6\u5c5e\u6027\uff0c\u62ff\u5230",(0,i.jsx)(n.code,{children:"event"}),"\u5bf9\u8c61\u5c5e\u6027\uff0c\u5e76\u6839\u636e\u5c5e\u6027\u4e0a\u7684\u4e8b\u4ef6\u5bf9\u8c61\u62fc\u63a5\u6210\u5b57\u7b26\u4e32\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// dev/src/compiler/codegen/events.js line 3\r\nconst fnExpRE = /^([\\w$_]+|\\([^)]*?\\))\\s*=>|^function(?:\\s+[\\w$]+)?\\s*\\(/\r\nconst fnInvokeRE = /\\([^)]*?\\);*$/\r\nconst simplePathRE = /^[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['[^']*?']|\\[\"[^\"]*?\"]|\\[\\d+]|\\[[A-Za-z_$][\\w$]*])*$/\r\n\r\n// dev/src/compiler/codegen/events.js line 7\r\n// KeyboardEvent.keyCode aliases\r\nconst keyCodes: { [key: string]: number | Array<number> } = {\r\n  esc: 27,\r\n  tab: 9,\r\n  enter: 13,\r\n  space: 32,\r\n  up: 38,\r\n  left: 37,\r\n  right: 39,\r\n  down: 40,\r\n  'delete': [8, 46]\r\n}\r\n// KeyboardEvent.key aliases\r\nconst keyNames: { [key: string]: string | Array<string> } = {\r\n  // #7880: IE11 and Edge use `Esc` for Escape key name.\r\n  esc: ['Esc', 'Escape'],\r\n  tab: 'Tab',\r\n  enter: 'Enter',\r\n  // #9112: IE11 uses `Spacebar` for Space key name.\r\n  space: [' ', 'Spacebar'],\r\n  // #7806: IE11 uses key names without `Arrow` prefix for arrow keys.\r\n  up: ['Up', 'ArrowUp'],\r\n  left: ['Left', 'ArrowLeft'],\r\n  right: ['Right', 'ArrowRight'],\r\n  down: ['Down', 'ArrowDown'],\r\n  // #9112: IE11 uses `Del` for Delete key name.\r\n  'delete': ['Backspace', 'Delete', 'Del']\r\n}\r\n}\r\n\r\n// dev/src/compiler/codegen/events.js line 37\r\n// #4868: modifiers that prevent the execution of the listener\r\n// need to explicitly return null so that we can determine whether to remove\r\n// the listener for .once\r\nconst genGuard = condition => `if(${condition})return null;`\r\nconst modifierCode: { [key: string]: string } = {\r\n  stop: '$event.stopPropagation();',\r\n  prevent: '$event.preventDefault();',\r\n  self: genGuard(`$event.target !== $event.currentTarget`),\r\n  ctrl: genGuard(`!$event.ctrlKey`),\r\n  shift: genGuard(`!$event.shiftKey`),\r\n  alt: genGuard(`!$event.altKey`),\r\n  meta: genGuard(`!$event.metaKey`),\r\n  left: genGuard(`'button' in $event && $event.button !== 0`),\r\n  middle: genGuard(`'button' in $event && $event.button !== 1`),\r\n  right: genGuard(`'button' in $event && $event.button !== 2`)\r\n}\r\n\r\n// dev/src/compiler/codegen/events.js line 55\r\nexport function genHandlers (\r\n  events: ASTElementHandlers,\r\n  isNative: boolean\r\n): string {\r\n  const prefix = isNative ? 'nativeOn:' : 'on:'\r\n  let staticHandlers = ``\r\n  let dynamicHandlers = ``\r\n  for (const name in events) { // \u904d\u5386AST\u89e3\u6790\u540e\u7684\u4e8b\u4ef6\u5c5e\u6027\r\n    const handlerCode = genHandler(events[name]) // \u5c06\u4e8b\u4ef6\u5bf9\u8c61\u8f6c\u6362\u6210\u53ef\u62fc\u63a5\u7684\u5b57\u7b26\u4e32\r\n    if (events[name] && events[name].dynamic) {\r\n      dynamicHandlers += `${name},${handlerCode},`\r\n    } else {\r\n      staticHandlers += `\"${name}\":${handlerCode},`\r\n    }\r\n  }\r\n  staticHandlers = `{${staticHandlers.slice(0, -1)}}`\r\n  if (dynamicHandlers) {\r\n    return prefix + `_d(${staticHandlers},[${dynamicHandlers.slice(0, -1)}])`\r\n  } else {\r\n    return prefix + staticHandlers\r\n  }\r\n}\r\n\r\n// dev/src/compiler/codegen/events.js line 96\r\nfunction genHandler (handler: ASTElementHandler | Array<ASTElementHandler>): string {\r\n  if (!handler) {\r\n    return 'function(){}'\r\n  }\r\n\r\n  // \u4e8b\u4ef6\u7ed1\u5b9a\u53ef\u4ee5\u591a\u4e2a\uff0c\u591a\u4e2a\u5728\u89e3\u6790AST\u6811\u65f6\u4f1a\u4ee5\u6570\u7ec4\u7684\u5f62\u5f0f\u5b58\u5728\uff0c\u5982\u679c\u6709\u591a\u4e2a\u5219\u4f1a\u9012\u5f52\u8c03\u7528getHandler\u65b9\u6cd5\u8fd4\u56de\u6570\u7ec4\u3002\r\n  if (Array.isArray(handler)) {\r\n    return `[${handler.map(handler => genHandler(handler)).join(',')}]`\r\n  }\r\n\r\n  const isMethodPath = simplePathRE.test(handler.value) // \u8c03\u7528\u65b9\u6cd5\u4e3a doThis \u578b\r\n  const isFunctionExpression = fnExpRE.test(handler.value) // \u8c03\u7528\u65b9\u6cd5\u4e3a () => {} or function() {} \u578b\r\n  const isFunctionInvocation = simplePathRE.test(handler.value.replace(fnInvokeRE, '')) // \u8c03\u7528\u65b9\u6cd5\u4e3a doThis($event) \u578b\r\n\r\n  if (!handler.modifiers) { // \u6ca1\u6709\u4fee\u9970\u7b26\r\n    if (isMethodPath || isFunctionExpression) { // \u7b26\u5408\u8fd9\u4e24\u4e2a\u6761\u4ef6\u5219\u76f4\u63a5\u8fd4\u56de\r\n      return handler.value\r\n    }\r\n    /* istanbul ignore if */\r\n    if (__WEEX__ && handler.params) {\r\n      return genWeexHandler(handler.params, handler.value)\r\n    }\r\n    return `function($event){${ // \u8fd4\u56de\u62fc\u63a5\u7684\u533f\u540d\u51fd\u6570\u7684\u5b57\u7b26\u4e32\r\n      isFunctionInvocation ? `return ${handler.value}` : handler.value\r\n    }}` // inline statement\r\n  } else { // \u5904\u7406\u5177\u6709\u4fee\u9970\u7b26\u7684\u60c5\u51b5\r\n    let code = ''\r\n    let genModifierCode = ''\r\n    const keys = []\r\n    for (const key in handler.modifiers) {  // \u904d\u5386modifiers\u4e0a\u8bb0\u5f55\u7684\u4fee\u9970\u7b26\r\n      if (modifierCode[key]) {\r\n        genModifierCode += modifierCode[key]  // \u6839\u636e\u4fee\u9970\u7b26\u6dfb\u52a0\u5bf9\u5e94js\u7684\u4ee3\u7801\r\n        // left/right\r\n        if (keyCodes[key]) {\r\n          keys.push(key)\r\n        }\r\n      } else if (key === 'exact') { // \u9488\u5bf9exact\u7684\u5904\u7406\r\n        const modifiers: ASTModifiers = (handler.modifiers: any)\r\n        genModifierCode += genGuard(\r\n          ['ctrl', 'shift', 'alt', 'meta']\r\n            .filter(keyModifier => !modifiers[keyModifier])\r\n            .map(keyModifier => `$event.${keyModifier}Key`)\r\n            .join('||')\r\n        )\r\n      } else {\r\n        keys.push(key) // \u5982\u679c\u4fee\u9970\u7b26\u4e0d\u662f\u4ee5\u4e0a\u4fee\u9970\u7b26\uff0c\u5219\u4f1a\u6dfb\u52a0\u5230keys\u6570\u7ec4\u4e2d\r\n      }\r\n    }\r\n    if (keys.length) {\r\n      code += genKeyFilter(keys) // \u5904\u7406\u5176\u4ed6\u4fee\u9970\u7b26 \u5373keyCodes\u4e2d\u5b9a\u4e49\u7684\u4fee\u9970\u7b26\r\n    }\r\n    // Make sure modifiers like prevent and stop get executed after key filtering\r\n    if (genModifierCode) {\r\n      code += genModifierCode\r\n    }\r\n    // \u6839\u636e\u4e09\u79cd\u4e0d\u540c\u7684\u4e66\u5199\u6a21\u677f\u8fd4\u56de\u4e0d\u540c\u7684\u5b57\u7b26\u4e32\r\n    const handlerCode = isMethodPath\r\n      ? `return ${handler.value}($event)`\r\n      : isFunctionExpression\r\n        ? `return (${handler.value})($event)`\r\n        : isFunctionInvocation\r\n          ? `return ${handler.value}`\r\n          : handler.value\r\n    /* istanbul ignore if */\r\n    if (__WEEX__ && handler.params) {\r\n      return genWeexHandler(handler.params, code + handlerCode)\r\n    }\r\n    return `function($event){${code}${handlerCode}}`\r\n  }\r\n}\r\n\r\n// dev/src/compiler/codegen/events.js line 175\r\nfunction genFilterCode (key: string): string {\r\n  const keyVal = parseInt(key, 10)\r\n  if (keyVal) { // \u5982\u679ckey\u662f\u6570\u5b57\uff0c\u5219\u76f4\u63a5\u8fd4\u56de$event.keyCode!==${keyVal}\r\n    return `$event.keyCode!==${keyVal}`\r\n  }\r\n  const keyCode = keyCodes[key]\r\n  const keyName = keyNames[key]\r\n  // \u8fd4\u56de_k\u51fd\u6570\uff0c\u5b83\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f$event.keyCode\uff0c\r\n  // \u7b2c\u4e8c\u4e2a\u53c2\u6570\u662fkey\u7684\u503c\uff0c\r\n  // \u7b2c\u4e09\u4e2a\u53c2\u6570\u5c31\u662fkey\u5728keyCodes\u4e2d\u5bf9\u5e94\u7684\u6570\u5b57\u3002\r\n  return (\r\n    `_k($event.keyCode,` +\r\n    `${JSON.stringify(key)},` +\r\n    `${JSON.stringify(keyCode)},` +\r\n    `$event.key,` +\r\n    `${JSON.stringify(keyName)}` +\r\n    `)`\r\n  )\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u4e8b\u4ef6\u7ed1\u5b9a",children:"\u4e8b\u4ef6\u7ed1\u5b9a"}),"\n",(0,i.jsxs)(n.p,{children:["\u524d\u9762\u4ecb\u7ecd\u4e86\u5982\u4f55\u7f16\u8bd1\u6a21\u677f\u63d0\u53d6\u4e8b\u4ef6\u6536\u96c6\u6307\u4ee4\u4ee5\u53ca\u751f\u6210",(0,i.jsx)(n.code,{children:"render"}),"\u5b57\u7b26\u4e32\u548c",(0,i.jsx)(n.code,{children:"render"}),"\u51fd\u6570\uff0c\u4f46\u662f\u4e8b\u4ef6\u771f\u6b63\u7684\u7ed1\u5b9a\u5230",(0,i.jsx)(n.code,{children:"DOM"}),"\u4e0a\u8fd8\u662f\u79bb\u4e0d\u5f00\u4e8b\u4ef6\u6ce8\u518c\uff0c\u6b64\u9636\u6bb5\u5c31\u53d1\u751f\u5728",(0,i.jsx)(n.code,{children:"patchVnode"}),"\u8fc7\u7a0b\u4e2d\uff0c\u5728\u751f\u6210\u5b8c\u6210",(0,i.jsx)(n.code,{children:"VNode"}),"\u540e\uff0c\u8fdb\u884c",(0,i.jsx)(n.code,{children:"patchVnode"}),"\u8fc7\u7a0b\u4e2d\u521b\u5efa\u771f\u5b9e",(0,i.jsx)(n.code,{children:"DOM"}),"\u65f6\u4f1a\u8fdb\u884c\u4e8b\u4ef6\u6ce8\u518c\u7684\u76f8\u5173\u94a9\u5b50\u5904\u7406\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// dev/src/core/vdom/patch.js line 33\r\nconst hooks = ['create', 'activate', 'update', 'remove', 'destroy']\r\n\r\n// dev/src/core/vdom/patch.js line 125\r\nfunction createElm (\r\n    vnode,\r\n    insertedVnodeQueue,\r\n    parentElm,\r\n    refElm,\r\n    nested,\r\n    ownerArray,\r\n    index\r\n  ) {\r\n  // ...\r\n  if (isDef(data)) {\r\n    invokeCreateHooks(vnode, insertedVnodeQueue)\r\n  }\r\n  // ...\r\n}\r\n\r\n// dev/src/core/vdom/patch.js line 303\r\n// \u5728\u4e4b\u524dcbs\u7ecf\u8fc7\u5904\u7406 \r\n// \u8fd9\u91cccbs.create\u5305\u542b\u5982\u4e0b\u51e0\u4e2a\u56de\u8c03\uff1a\r\n// updateAttrs\u3001updateClass\u3001updateDOMListeners\u3001updateDOMProps\u3001updateStyle\u3001update\u3001updateDirectives\r\nfunction invokeCreateHooks (vnode, insertedVnodeQueue) {\r\n    for (let i = 0; i < cbs.create.length; ++i) {\r\n      cbs.create[i](emptyNode, vnode)\r\n    }\r\n    i = vnode.data.hook // Reuse variable\r\n    if (isDef(i)) {\r\n      if (isDef(i.create)) i.create(emptyNode, vnode)\r\n      if (isDef(i.insert)) insertedVnodeQueue.push(vnode)\r\n    }\r\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"invokeCreateHooks"}),"\u5c31\u662f\u4e00\u4e2a\u6a21\u677f\u6307\u4ee4\u5904\u7406\u7684\u4efb\u52a1\uff0c\u4ed6\u5206\u522b\u9488\u5bf9\u4e0d\u540c\u7684\u6307\u4ee4\u4e3a\u771f\u5b9e\u9636\u6bb5\u521b\u5efa\u4e0d\u540c\u7684\u4efb\u52a1\uff0c\u9488\u5bf9\u4e8b\u4ef6\uff0c\u8fd9\u91cc\u4f1a\u8c03",(0,i.jsx)(n.code,{children:"updateDOMListeners"}),"\u5bf9\u771f\u5b9e\u7684",(0,i.jsx)(n.code,{children:"DOM"}),"\u8282\u70b9\u6ce8\u518c\u4e8b\u4ef6\u4efb\u52a1\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// dev/src/platforms/web/runtime/modules/events.js line 105\r\nfunction updateDOMListeners (oldVnode: VNodeWithData, vnode: VNodeWithData) {\r\n  if (isUndef(oldVnode.data.on) && isUndef(vnode.data.on)) {  // on\u662f\u4e8b\u4ef6\u6307\u4ee4\u7684\u6807\u5fd7\r\n    return\r\n  }\r\n  // \u65b0\u65e7\u8282\u70b9\u4e0d\u540c\u7684\u4e8b\u4ef6\u7ed1\u5b9a\u89e3\u7ed1\r\n  const on = vnode.data.on || {}\r\n  const oldOn = oldVnode.data.on || {}\r\n  // \u62ff\u5230\u9700\u8981\u6dfb\u52a0\u4e8b\u4ef6\u7684\u771f\u5b9eDOM\u8282\u70b9\r\n  target = vnode.elm\r\n  // normalizeEvents\u662f\u5bf9\u4e8b\u4ef6\u517c\u5bb9\u6027\u7684\u5904\u7406\r\n  normalizeEvents(on)\r\n  // \u8c03\u7528updateListeners\u65b9\u6cd5\uff0c\u5e76\u5c06on\u4f5c\u4e3a\u53c2\u6570\u4f20\u8fdb\u53bb\r\n  updateListeners(on, oldOn, add, remove, createOnceHandler, vnode.context)\r\n  target = undefined\r\n}\r\n\r\n// dev/src/core/vdom/helpers/update-listeners.js line line 53\r\nexport function updateListeners (\r\n  on: Object,\r\n  oldOn: Object,\r\n  add: Function,\r\n  remove: Function,\r\n  createOnceHandler: Function,\r\n  vm: Component\r\n) {\r\n  let name, def, cur, old, event\r\n  for (name in on) { // \u904d\u5386\u4e8b\u4ef6\r\n    def = cur = on[name]\r\n    old = oldOn[name]\r\n    event = normalizeEvent(name)\r\n    /* istanbul ignore if */\r\n    if (__WEEX__ && isPlainObject(def)) {\r\n      cur = def.handler\r\n      event.params = def.params\r\n    }\r\n    if (isUndef(cur)) { // \u4e8b\u4ef6\u540d\u975e\u6cd5\u7684\u62a5\u9519\u5904\u7406\r\n      process.env.NODE_ENV !== 'production' && warn(\r\n        `Invalid handler for event \"${event.name}\": got ` + String(cur),\r\n        vm\r\n      )\r\n    } else if (isUndef(old)) { // \u65e7\u8282\u70b9\u4e0d\u5b58\u5728\r\n      if (isUndef(cur.fns)) { // createFunInvoker\u8fd4\u56de\u4e8b\u4ef6\u6700\u7ec8\u6267\u884c\u7684\u56de\u8c03\u51fd\u6570\r\n        cur = on[name] = createFnInvoker(cur, vm)\r\n      }\r\n      if (isTrue(event.once)) {  // \u53ea\u89e6\u53d1\u4e00\u6b21\u7684\u4e8b\u4ef6\r\n        cur = on[name] = createOnceHandler(event.name, cur, event.capture)\r\n      }\r\n      // \u6267\u884c\u771f\u6b63\u6ce8\u518c\u4e8b\u4ef6\u7684\u6267\u884c\u51fd\u6570\r\n      add(event.name, cur, event.capture, event.passive, event.params)\r\n    } else if (cur !== old) {\r\n      old.fns = cur\r\n      on[name] = old\r\n    }\r\n  }\r\n  for (name in oldOn) { // \u65e7\u8282\u70b9\u5b58\u5728\uff0c\u89e3\u9664\u65e7\u8282\u70b9\u4e0a\u7684\u7ed1\u5b9a\u4e8b\u4ef6\r\n    if (isUndef(on[name])) {\r\n      event = normalizeEvent(name)\r\n      // \u79fb\u9664\u4e8b\u4ef6\u76d1\u542c\r\n      remove(event.name, oldOn[name], event.capture)\r\n    }\r\n  }\r\n}\r\n\r\n// dev/src/platforms/web/runtime/modules/events.js line 32\r\n// \u5728\u6267\u884c\u5b8c\u56de\u8c03\u4e4b\u540e\uff0c\u79fb\u9664\u4e8b\u4ef6\u7ed1\u5b9a\r\nfunction createOnceHandler (event, handler, capture) {\r\n  const _target = target // save current target element in closure\r\n  return function onceHandler () {\r\n    const res = handler.apply(null, arguments)\r\n    if (res !== null) {\r\n      remove(event, onceHandler, capture, _target)\r\n    }\r\n  }\r\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u6700\u7ec8\u6dfb\u52a0\u4e0e\u79fb\u9664\u4e8b\u4ef6\u90fd\u662f\u8c03\u7528\u7684",(0,i.jsx)(n.code,{children:"add"}),"\u4e0e",(0,i.jsx)(n.code,{children:"remove"}),"\u65b9\u6cd5\uff0c\u6700\u7ec8\u8c03\u7528\u7684\u65b9\u6cd5\u5373",(0,i.jsx)(n.code,{children:"DOM"}),"\u7684",(0,i.jsx)(n.code,{children:"addEventListener"}),"\u65b9\u6cd5\u4e0e",(0,i.jsx)(n.code,{children:"removeEventListener"}),"\u65b9\u6cd5\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// dev/src/platforms/web/runtime/modules/events.js line 46\r\nfunction add (\r\n  name: string,\r\n  handler: Function,\r\n  capture: boolean,\r\n  passive: boolean\r\n) {\r\n  // async edge case #6566: inner click event triggers patch, event handler\r\n  // attached to outer element during patch, and triggered again. This\r\n  // happens because browsers fire microtask ticks between event propagation.\r\n  // the solution is simple: we save the timestamp when a handler is attached,\r\n  // and the handler would only fire if the event passed to it was fired\r\n  // AFTER it was attached.\r\n  if (useMicrotaskFix) {\r\n    const attachedTimestamp = currentFlushTimestamp\r\n    const original = handler\r\n    handler = original._wrapper = function (e) {\r\n      if (\r\n        // no bubbling, should always fire.\r\n        // this is just a safety net in case event.timeStamp is unreliable in\r\n        // certain weird environments...\r\n        e.target === e.currentTarget ||\r\n        // event is fired after handler attachment\r\n        e.timeStamp >= attachedTimestamp ||\r\n        // bail for environments that have buggy event.timeStamp implementations\r\n        // #9462 iOS 9 bug: event.timeStamp is 0 after history.pushState\r\n        // #9681 QtWebEngine event.timeStamp is negative value\r\n        e.timeStamp <= 0 ||\r\n        // #9448 bail if event is fired in another document in a multi-page\r\n        // electron/nw.js app, since event.timeStamp will be using a different\r\n        // starting reference\r\n        e.target.ownerDocument !== document\r\n      ) {\r\n        return original.apply(this, arguments)\r\n      }\r\n    }\r\n  }\r\n  target.addEventListener(\r\n    name,\r\n    handler,\r\n    supportsPassive\r\n      ? { capture, passive }\r\n      : capture\r\n  )\r\n}\r\n\r\n// dev/src/platforms/web/runtime/modules/events.js line 92\r\nfunction remove (\r\n  name: string,\r\n  handler: Function,\r\n  capture: boolean,\r\n  _target?: HTMLElement\r\n) {\r\n  (_target || target).removeEventListener(\r\n    name,\r\n    handler._wrapper || handler,\r\n    capture\r\n  )\r\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u6bcf\u65e5\u4e00\u9898",children:"\u6bcf\u65e5\u4e00\u9898"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"https://github.com/WindrunnerMax/EveryDay\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u53c2\u8003",children:"\u53c2\u8003"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"https://cn.vuejs.org/v2/api/#v-on\r\nhttps://juejin.im/post/6844903919290679304\r\nhttps://juejin.im/post/6844904061897015310\r\nhttps://juejin.im/post/6844904126250221576\r\nhttps://segmentfault.com/a/1190000009750348\r\nhttps://blog.csdn.net/weixin_41275295/article/details/100549145\r\nhttps://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener\r\nhttps://github.com/liutao/vue2.0-source/blob/master/%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86.md\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);